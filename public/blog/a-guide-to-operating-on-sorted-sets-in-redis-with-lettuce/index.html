<!DOCTYPE html>
<html lang="en-US" class="scroll-smooth dark">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>

<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>A Guide to Operating on Sorted Sets in Redis with Lettuce</title>
<meta
  name="description"
  content="Sorted Sets in redis are one of my personal favorite tools when operating at scale. As of this writing, there are over 30 unique operations you can perform against sorted sets in redis. This article will focus on some of the more common ones you&#39;re going to need to know, and it will use a reactive lettuce client to demonstrate them."
/>
<link rel="canonical" href="http://localhost:1313/blog/a-guide-to-operating-on-sorted-sets-in-redis-with-lettuce/" />
<link rel="robots" href="/robots.txt" />

<link rel="icon" type="image/x-icon" href="/icons/favicon.ico" />



<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']] } });</script>

<link rel="stylesheet" href="http://localhost:1313/css/app.css" /></head>

  <body class="max-w-screen-md mx-auto px-2.5">
    <div class="header">
      <header class="flex flex-col sm:flex-row items-center gap-5 sm:gap-10 pt-16 py-12">
   


<div class="flex-none w-20 h-20 rounded-full overflow-hidden">
  <a href="http://localhost:1313/">
    <img
      srcset="/img/profile-picture_hu4241499301404582006.jpg 80w"
      src="/img/profile-picture.jpg"
      width="386"
      height="345"
      alt="Nick Fisher&#39;s tech blog"
    />
  </a>
</div>

  
  <div class="flex flex-col gap-5">
    <a href="http://localhost:1313/">
  <h1 id="site-title">Nick Fisher&#39;s tech blog</h1>
</a>
 
    <nav>
  <ul>
     
    
    <li>
      <a href="/" class="">
        Home
      </a>
    </li>
    
    <li>
      <a href="/blog" class="">
        Blog
      </a>
    </li>
    
    <li>
      <a href="/about" class="">
        About me
      </a>
    </li>
    
    <li>
      <a href="/categories" class="">
        Categories
      </a>
    </li>
    
    <li>
      <a href="/tags" class="">
        Tags
      </a>
    </li>
    
  </ul>
</nav>

  </div>
</header>

      <button class="toggle-theme" aria-label="Toggle Theme" title="Toggle Theme" onclick="toggleTheme()">
  <span class="theme-icon light"> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" />
</svg> </span>
  <span class="theme-icon dark"> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" d="M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z" />
</svg> </span>
</button>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const theme = localStorage.getItem('theme');

    if (!theme || theme === 'light') {
      setTheme('light');
    } else {
      setTheme(theme);
    }
  });

  function setTheme(theme) {
    const html = document.querySelector('html');
    localStorage.setItem('theme', theme);

    if (theme === 'light') {
      if (html.classList.contains('dark')) {
        document.querySelector('html').classList.remove('dark');
      }

      document.querySelector('.theme-icon.light').style.display = 'none';
      document.querySelector('.theme-icon.dark').style.display = 'block';
    } else {
      if (!html.classList.contains('dark')) {
        document.querySelector('html').classList.add('dark');
      }

      document.querySelector('.theme-icon.dark').style.display = 'none';
      document.querySelector('.theme-icon.light').style.display = 'block';
    }
  }

  function toggleTheme() {
    const theme = localStorage.getItem('theme');

    if (theme === 'light') {
      setTheme('dark');
    } else {
      setTheme('light');
    }
  }
</script>
    </div>
  
    <main id="content">

<article class="flex flex-col gap-10">
  <header class="flex flex-col gap-2">
    <h2 class="title-large">A Guide to Operating on Sorted Sets in Redis with Lettuce</h2>

    <div class="meta">
      
      <time datetime="2021-04-17 08:15:31 &#43;0000 UTC" title='Sat, Apr 17, 2021, 8:15 AM UTC'>
        17/04/2021 - Estimated reading time: 4 minutes
      </time>

       
      
    </div>
  </header>

  

  <section><p>Sorted Sets in redis are one of my personal favorite tools when operating at scale. As of this writing, <a href="https://redis.io/commands/#sorted_set">there are over 30 unique operations you can perform against sorted sets in redis</a>. This article will focus on some of the more common ones you're going to need to know, and it will use a reactive lettuce client to demonstrate them.</p>
<p>The source code for what follows <a href="https://github.com/nfisher23/reactive-programming-webflux">can be found on Github</a>.</p>
<h3 id="adding-and-updating-sorted-sets">Adding and Updating Sorted Sets</h3>
<p>A sorted set can be thought of as a set with a score. The elements are sorted according to their score, and if the scores match then it will then use lexicographical ordering of the elements itself. Two elements can't be in the same position because a set does not allow multiple elements.</p>
<p>To add to a set, you need to specify the score, and to update the score for an element in the set, you run the exact same command [&quot;add&quot;]. Here is an example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>    @Test
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">zAddAndUpdate</span>() {
</span></span><span style="display:flex;"><span>        String setKey <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">&amp;</span>#34;set<span style="color:#ff79c6">-</span>key<span style="color:#ff79c6">-</span>1<span style="color:#ff79c6">&amp;</span>#34;;
</span></span><span style="display:flex;"><span>        Mono<span style="color:#ff79c6">&amp;</span>lt;Long<span style="color:#ff79c6">&amp;</span>gt; addOneHundredScoreMono <span style="color:#ff79c6">=</span> redisReactiveCommands.<span style="color:#50fa7b">zadd</span>(setKey, ScoredValue.<span style="color:#50fa7b">just</span>(100, <span style="color:#ff79c6">&amp;</span>#34;one hundred<span style="color:#ff79c6">&amp;</span>#34;));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        StepVerifier.<span style="color:#50fa7b">create</span>(addOneHundredScoreMono)
</span></span><span style="display:flex;"><span>                .<span style="color:#50fa7b">expectNextMatches</span>(numAdded <span style="color:#ff79c6">-&amp;</span>gt; 1L <span style="color:#ff79c6">==</span> numAdded).<span style="color:#50fa7b">verifyComplete</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        Mono<span style="color:#ff79c6">&amp;</span>lt;Double<span style="color:#ff79c6">&amp;</span>gt; getOneHundredScoreMono <span style="color:#ff79c6">=</span> redisReactiveCommands.<span style="color:#50fa7b">zscore</span>(setKey, <span style="color:#ff79c6">&amp;</span>#34;one hundred<span style="color:#ff79c6">&amp;</span>#34;);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        StepVerifier.<span style="color:#50fa7b">create</span>(getOneHundredScoreMono)
</span></span><span style="display:flex;"><span>                .<span style="color:#50fa7b">expectNextMatches</span>(score <span style="color:#ff79c6">-&amp;</span>gt; score <span style="color:#ff79c6">&amp;</span>lt; 100.<span style="color:#50fa7b">01</span> <span style="color:#ff79c6">&amp;</span>amp;<span style="color:#ff79c6">&amp;</span>amp; score <span style="color:#ff79c6">&amp;</span>gt; 99.<span style="color:#50fa7b">99</span>)
</span></span><span style="display:flex;"><span>                .<span style="color:#50fa7b">verifyComplete</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        Mono<span style="color:#ff79c6">&amp;</span>lt;Double<span style="color:#ff79c6">&amp;</span>gt; elementDoesNotExistMono <span style="color:#ff79c6">=</span> redisReactiveCommands.<span style="color:#50fa7b">zscore</span>(setKey, <span style="color:#ff79c6">&amp;</span>#34;not here<span style="color:#ff79c6">&amp;</span>#34;);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        StepVerifier.<span style="color:#50fa7b">create</span>(elementDoesNotExistMono)
</span></span><span style="display:flex;"><span>                .<span style="color:#50fa7b">verifyComplete</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        Mono<span style="color:#ff79c6">&amp;</span>lt;Long<span style="color:#ff79c6">&amp;</span>gt; updateOneHundredScoreMono <span style="color:#ff79c6">=</span> redisReactiveCommands.<span style="color:#50fa7b">zadd</span>(setKey, ScoredValue.<span style="color:#50fa7b">just</span>(105, <span style="color:#ff79c6">&amp;</span>#34;one hundred<span style="color:#ff79c6">&amp;</span>#34;));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        StepVerifier.<span style="color:#50fa7b">create</span>(updateOneHundredScoreMono)
</span></span><span style="display:flex;"><span>                <span style="color:#6272a4">// updated, not added, so 0</span>
</span></span><span style="display:flex;"><span>                .<span style="color:#50fa7b">expectNextMatches</span>(numAdded <span style="color:#ff79c6">-&amp;</span>gt; 0L <span style="color:#ff79c6">==</span> numAdded)
</span></span><span style="display:flex;"><span>                .<span style="color:#50fa7b">verifyComplete</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        StepVerifier.<span style="color:#50fa7b">create</span>(getOneHundredScoreMono)
</span></span><span style="display:flex;"><span>                .<span style="color:#50fa7b">expectNextMatches</span>(score <span style="color:#ff79c6">-&amp;</span>gt; score <span style="color:#ff79c6">&amp;</span>lt; 105.<span style="color:#50fa7b">01</span> <span style="color:#ff79c6">&amp;</span>amp;<span style="color:#ff79c6">&amp;</span>amp; score <span style="color:#ff79c6">&amp;</span>gt; 104.<span style="color:#50fa7b">99</span>)
</span></span><span style="display:flex;"><span>                .<span style="color:#50fa7b">verifyComplete</span>();
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><p>Here, we're adding an element to a sorted set [the set is created when the first element is added, and if you remove the last element in a set then the set will be destroyed automatically] with a score of 100. We are later updating the same element [the element with value &quot;one hundred&quot;] to have a score of 105. Because a score is a double value [and those can operate a bit unpredictably&ndash;i.e. lose their &quot;exact&quot; value], I'm asserting that the score equals what it's supposed to by checking that it's between two other double values.</p>
<h3 id="retrieving-a-range-of-elements-and-scores">Retrieving a Range of Elements and Scores</h3>
<p>It's a common need to get a range [in this case, all elements] of elements in a sorted set and return their scores along with the elements:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>    @Test
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">zRange_Rank_AndScore</span>() {
</span></span><span style="display:flex;"><span>        String setKey <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">&amp;</span>#34;set<span style="color:#ff79c6">-</span>key<span style="color:#ff79c6">-</span>1<span style="color:#ff79c6">&amp;</span>#34;;
</span></span><span style="display:flex;"><span>        Mono<span style="color:#ff79c6">&amp;</span>lt;Long<span style="color:#ff79c6">&amp;</span>gt; addOneHundredScoreMono <span style="color:#ff79c6">=</span> redisReactiveCommands.<span style="color:#50fa7b">zadd</span>(setKey, ScoredValue.<span style="color:#50fa7b">just</span>(100, <span style="color:#ff79c6">&amp;</span>#34;one hundred<span style="color:#ff79c6">&amp;</span>#34;));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        StepVerifier.<span style="color:#50fa7b">create</span>(addOneHundredScoreMono)
</span></span><span style="display:flex;"><span>                .<span style="color:#50fa7b">expectNextMatches</span>(numAdded <span style="color:#ff79c6">-&amp;</span>gt; 1L <span style="color:#ff79c6">==</span> numAdded).<span style="color:#50fa7b">verifyComplete</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        Mono<span style="color:#ff79c6">&amp;</span>lt;List<span style="color:#ff79c6">&amp;</span>lt;ScoredValue<span style="color:#ff79c6">&amp;</span>lt;String<span style="color:#ff79c6">&amp;</span>gt;<span style="color:#ff79c6">&amp;</span>gt;<span style="color:#ff79c6">&amp;</span>gt; allCollectedElementsMono <span style="color:#ff79c6">=</span> redisReactiveCommands
</span></span><span style="display:flex;"><span>                .<span style="color:#50fa7b">zrangebyscoreWithScores</span>(setKey, Range.<span style="color:#50fa7b">unbounded</span>()).<span style="color:#50fa7b">collectList</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        StepVerifier.<span style="color:#50fa7b">create</span>(allCollectedElementsMono)
</span></span><span style="display:flex;"><span>                .<span style="color:#50fa7b">expectNextMatches</span>(allElements <span style="color:#ff79c6">-&amp;</span>gt; allElements.<span style="color:#50fa7b">size</span>() <span style="color:#ff79c6">==</span> 1
</span></span><span style="display:flex;"><span>                                <span style="color:#ff79c6">&amp;</span>amp;<span style="color:#ff79c6">&amp;</span>amp; allElements.<span style="color:#50fa7b">stream</span>().<span style="color:#50fa7b">allMatch</span>(
</span></span><span style="display:flex;"><span>                        scoredValue <span style="color:#ff79c6">-&amp;</span>gt; scoredValue.<span style="color:#50fa7b">getScore</span>() <span style="color:#ff79c6">==</span> 100
</span></span><span style="display:flex;"><span>                                <span style="color:#ff79c6">&amp;</span>amp;<span style="color:#ff79c6">&amp;</span>amp; scoredValue.<span style="color:#50fa7b">getValue</span>().<span style="color:#50fa7b">equals</span>(<span style="color:#ff79c6">&amp;</span>#34;one hundred<span style="color:#ff79c6">&amp;</span>#34;)
</span></span><span style="display:flex;"><span>                        )
</span></span><span style="display:flex;"><span>                ).<span style="color:#50fa7b">verifyComplete</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        Mono<span style="color:#ff79c6">&amp;</span>lt;Long<span style="color:#ff79c6">&amp;</span>gt; addFiftyMono <span style="color:#ff79c6">=</span> redisReactiveCommands.<span style="color:#50fa7b">zadd</span>(setKey, ScoredValue.<span style="color:#50fa7b">just</span>(50, <span style="color:#ff79c6">&amp;</span>#34;fifty<span style="color:#ff79c6">&amp;</span>#34;));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        StepVerifier.<span style="color:#50fa7b">create</span>(addFiftyMono)
</span></span><span style="display:flex;"><span>                .<span style="color:#50fa7b">expectNextMatches</span>(numAdded <span style="color:#ff79c6">-&amp;</span>gt; 1L <span style="color:#ff79c6">==</span> numAdded)
</span></span><span style="display:flex;"><span>                .<span style="color:#50fa7b">verifyComplete</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#6272a4">// by default, lowest score is at the front, or zero index</span>
</span></span><span style="display:flex;"><span>        StepVerifier.<span style="color:#50fa7b">create</span>(allCollectedElementsMono)
</span></span><span style="display:flex;"><span>                .<span style="color:#50fa7b">expectNextMatches</span>(
</span></span><span style="display:flex;"><span>                        allElements <span style="color:#ff79c6">-&amp;</span>gt; allElements.<span style="color:#50fa7b">size</span>() <span style="color:#ff79c6">==</span> 2
</span></span><span style="display:flex;"><span>                                <span style="color:#ff79c6">&amp;</span>amp;<span style="color:#ff79c6">&amp;</span>amp; allElements.<span style="color:#50fa7b">get</span>(0).<span style="color:#50fa7b">equals</span>(ScoredValue.<span style="color:#50fa7b">just</span>(50, <span style="color:#ff79c6">&amp;</span>#34;fifty<span style="color:#ff79c6">&amp;</span>#34;))
</span></span><span style="display:flex;"><span>                                <span style="color:#ff79c6">&amp;</span>amp;<span style="color:#ff79c6">&amp;</span>amp; allElements.<span style="color:#50fa7b">get</span>(1).<span style="color:#50fa7b">equals</span>(ScoredValue.<span style="color:#50fa7b">just</span>(100, <span style="color:#ff79c6">&amp;</span>#34;one hundred<span style="color:#ff79c6">&amp;</span>#34;))
</span></span><span style="display:flex;"><span>                ).<span style="color:#50fa7b">verifyComplete</span>();
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><p>We're using <strong>zrangebyscoreWIthScores</strong> to get a collection of elements and their scores. Because we're not actually filtering out any elements [because we used <strong>Range.unbounded</strong>], this is effectively the same as us using <strong>smembers</strong> against a vanilla set, except now we are getting the score associated with the element instead of just the element itself. It's important to note that, by default, any elements that are returned from a sorted set are sorted with the lowest score &quot;first,&quot; or in the 0th place in the collection.</p>
<h3 id="removing-a-range-of-elements-by-score">Removing a Range of Elements by Score</h3>
<p>As the title of this section states, we also might want to remove any section of a sorted set based on a range of scores. To accomplish that, we will want to use <strong>zremrangebyscore</strong>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>    @Test
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">zRevRangeByScore</span>() {
</span></span><span style="display:flex;"><span>        String setKey <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">&amp;</span>#34;set<span style="color:#ff79c6">-</span>key<span style="color:#ff79c6">-</span>1<span style="color:#ff79c6">&amp;</span>#34;;
</span></span><span style="display:flex;"><span>        Mono<span style="color:#ff79c6">&amp;</span>lt;Long<span style="color:#ff79c6">&amp;</span>gt; addOneHundredScoreMono <span style="color:#ff79c6">=</span> redisReactiveCommands
</span></span><span style="display:flex;"><span>                .<span style="color:#50fa7b">zadd</span>(
</span></span><span style="display:flex;"><span>                        setKey,
</span></span><span style="display:flex;"><span>                        ScoredValue.<span style="color:#50fa7b">just</span>(100, <span style="color:#ff79c6">&amp;</span>#34;first<span style="color:#ff79c6">&amp;</span>#34;),
</span></span><span style="display:flex;"><span>                        ScoredValue.<span style="color:#50fa7b">just</span>(200, <span style="color:#ff79c6">&amp;</span>#34;second<span style="color:#ff79c6">&amp;</span>#34;),
</span></span><span style="display:flex;"><span>                        ScoredValue.<span style="color:#50fa7b">just</span>(300, <span style="color:#ff79c6">&amp;</span>#34;third<span style="color:#ff79c6">&amp;</span>#34;)
</span></span><span style="display:flex;"><span>                );
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        StepVerifier.<span style="color:#50fa7b">create</span>(addOneHundredScoreMono)
</span></span><span style="display:flex;"><span>                .<span style="color:#50fa7b">expectNextMatches</span>(numAdded <span style="color:#ff79c6">-&amp;</span>gt; 3L <span style="color:#ff79c6">==</span> numAdded).<span style="color:#50fa7b">verifyComplete</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        Mono<span style="color:#ff79c6">&amp;</span>lt;Long<span style="color:#ff79c6">&amp;</span>gt; removeElementsByScoreMono <span style="color:#ff79c6">=</span> redisReactiveCommands
</span></span><span style="display:flex;"><span>                .<span style="color:#50fa7b">zremrangebyscore</span>(setKey, Range.<span style="color:#50fa7b">create</span>(90, 210));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        StepVerifier.<span style="color:#50fa7b">create</span>(removeElementsByScoreMono)
</span></span><span style="display:flex;"><span>                .<span style="color:#50fa7b">expectNext</span>(2L)
</span></span><span style="display:flex;"><span>                .<span style="color:#50fa7b">verifyComplete</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        Mono<span style="color:#ff79c6">&amp;</span>lt;List<span style="color:#ff79c6">&amp;</span>lt;ScoredValue<span style="color:#ff79c6">&amp;</span>lt;String<span style="color:#ff79c6">&amp;</span>gt;<span style="color:#ff79c6">&amp;</span>gt;<span style="color:#ff79c6">&amp;</span>gt; allCollectedElementsMono <span style="color:#ff79c6">=</span> redisReactiveCommands
</span></span><span style="display:flex;"><span>                .<span style="color:#50fa7b">zrangebyscoreWithScores</span>(setKey, Range.<span style="color:#50fa7b">unbounded</span>()).<span style="color:#50fa7b">collectList</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        StepVerifier.<span style="color:#50fa7b">create</span>(allCollectedElementsMono)
</span></span><span style="display:flex;"><span>                .<span style="color:#50fa7b">expectNextMatches</span>(allElements <span style="color:#ff79c6">-&amp;</span>gt; allElements.<span style="color:#50fa7b">size</span>() <span style="color:#ff79c6">==</span> 1
</span></span><span style="display:flex;"><span>                                <span style="color:#ff79c6">&amp;</span>amp;<span style="color:#ff79c6">&amp;</span>amp; allElements.<span style="color:#50fa7b">stream</span>().<span style="color:#50fa7b">allMatch</span>(
</span></span><span style="display:flex;"><span>                        scoredValue <span style="color:#ff79c6">-&amp;</span>gt; scoredValue.<span style="color:#50fa7b">getScore</span>() <span style="color:#ff79c6">==</span> 300
</span></span><span style="display:flex;"><span>                                <span style="color:#ff79c6">&amp;</span>amp;<span style="color:#ff79c6">&amp;</span>amp; scoredValue.<span style="color:#50fa7b">getValue</span>().<span style="color:#50fa7b">equals</span>(<span style="color:#ff79c6">&amp;</span>#34;third<span style="color:#ff79c6">&amp;</span>#34;)
</span></span><span style="display:flex;"><span>                        )
</span></span><span style="display:flex;"><span>                ).<span style="color:#50fa7b">verifyComplete</span>();
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><p>Here we're dropping any elements with score between 90 and 210, which in this specific case will just be the &quot;first&quot; and &quot;second&quot; elements which have been given scores of 100 and 200, respectively.</p>
</section>

  
    
  

    
  


  <footer>
    
      <div class="pb-14 taxonomy-list tags-list">
      
        <a href="/tags/java/" alt="Java">
          Java
        </a>
      
        <a href="/tags/spring/" alt="Spring">
          Spring
        </a>
      
        <a href="/tags/webflux/" alt="Webflux">
          Webflux
        </a>
      
        <a href="/tags/lettuce/" alt="Lettuce">
          Lettuce
        </a>
      
        <a href="/tags/redis/" alt="Redis">
          Redis
        </a>
      
      </div>
    
  </footer>
</article>


    </main><footer class="pt-5 pb-10 grid gap-3 sm:grid-cols-2">
    <div class="text-xs font-semibold text-gray-500 order-2 sm:order-1">
  © 2018-2025 —
  <a href="http://localhost:1313/">Nick Fisher&#39;s tech blog</a> 
</div>

    <div class="order-1 sm:order-2">
  <ul class="flex sm:justify-end gap-5">
    
    
    <li>    
      <a href="https://www.linkedin.com/in/nick-fisher-software/" target="_blank" rel="noopener noreferrer">LinkedIn</a>
    </li>
    
    <li>    
      <a href="https://github.com/nfisher23" target="_blank" rel="noopener noreferrer">GitHub</a>
    </li>
    
    
  </ul>
</div>

</footer></body>
</html>
