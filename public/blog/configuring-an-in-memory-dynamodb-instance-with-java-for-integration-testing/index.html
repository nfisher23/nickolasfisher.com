<!DOCTYPE html>
<html lang="en-US" class="scroll-smooth dark">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>

<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Configuring an In Memory DynamoDB instance with Java for Integration Testing</title>
<meta
  name="description"
  content="While using the AWS SDK 2.0, which has support for reactive programming, it became clear that there was no straightforward support for an embedded dynamo db instance for testing. I spent a fair amount of time figuring it out by starting with this github link and ultimately adapting it to my own needs."
/>
<link rel="canonical" href="http://localhost:1313/blog/configuring-an-in-memory-dynamodb-instance-with-java-for-integration-testing/" />
<link rel="robots" href="/robots.txt" />

<link rel="icon" type="image/x-icon" href="/icons/favicon.ico" />



<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']] } });</script>

<link rel="stylesheet" href="http://localhost:1313/css/app.css" /></head>

  <body class="max-w-screen-md mx-auto px-2.5">
    <div class="header">
      <header class="flex flex-col sm:flex-row items-center gap-5 sm:gap-10 pt-16 py-12">
   


<div class="flex-none w-20 h-20 rounded-full overflow-hidden">
  <a href="http://localhost:1313/">
    <img
      srcset="/img/profile-picture_hu4241499301404582006.jpg 80w"
      src="/img/profile-picture.jpg"
      width="386"
      height="345"
      alt="Nick Fisher&#39;s tech blog"
    />
  </a>
</div>

  
  <div class="flex flex-col gap-5">
    <a href="http://localhost:1313/">
  <h1 id="site-title">Nick Fisher&#39;s tech blog</h1>
</a>
 
    <nav>
  <ul>
     
    
    <li>
      <a href="/" class="">
        Home
      </a>
    </li>
    
    <li>
      <a href="/blog" class="">
        Blog
      </a>
    </li>
    
    <li>
      <a href="/about" class="">
        About me
      </a>
    </li>
    
    <li>
      <a href="/categories" class="">
        Categories
      </a>
    </li>
    
    <li>
      <a href="/tags" class="">
        Tags
      </a>
    </li>
    
  </ul>
</nav>

  </div>
</header>

      <button class="toggle-theme" aria-label="Toggle Theme" title="Toggle Theme" onclick="toggleTheme()">
  <span class="theme-icon light"> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" />
</svg> </span>
  <span class="theme-icon dark"> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" d="M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z" />
</svg> </span>
</button>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const theme = localStorage.getItem('theme');

    if (!theme || theme === 'light') {
      setTheme('light');
    } else {
      setTheme(theme);
    }
  });

  function setTheme(theme) {
    const html = document.querySelector('html');
    localStorage.setItem('theme', theme);

    if (theme === 'light') {
      if (html.classList.contains('dark')) {
        document.querySelector('html').classList.remove('dark');
      }

      document.querySelector('.theme-icon.light').style.display = 'none';
      document.querySelector('.theme-icon.dark').style.display = 'block';
    } else {
      if (!html.classList.contains('dark')) {
        document.querySelector('html').classList.add('dark');
      }

      document.querySelector('.theme-icon.dark').style.display = 'none';
      document.querySelector('.theme-icon.light').style.display = 'block';
    }
  }

  function toggleTheme() {
    const theme = localStorage.getItem('theme');

    if (theme === 'light') {
      setTheme('dark');
    } else {
      setTheme('light');
    }
  }
</script>
    </div>
  
    <main id="content">

<article class="flex flex-col gap-10">
  <header class="flex flex-col gap-2">
    <h2 class="title-large">Configuring an In Memory DynamoDB instance with Java for Integration Testing</h2>

    <div class="meta">
      
      <time datetime="2020-10-10 00:02:25 &#43;0000 UTC" title='Sat, Oct 10, 2020, 12:02 AM UTC'>
        10/10/2020 - Estimated reading time: 3 minutes
      </time>

       
      
    </div>
  </header>

  

  <section><p>While using the AWS SDK 2.0, which has support for reactive programming, it became clear that there was no straightforward support for an embedded dynamo db instance for testing. I spent a fair amount of time figuring it out by starting with <a href="https://github.com/aws/aws-sdk-java-v2/blob/93269d4c0416d0f72e086774265847d6af0d54ec/services-custom/dynamodb-enhanced/src/test/java/software/amazon/awssdk/extensions/dynamodb/mappingclient/functionaltests/LocalDynamoDb.java">this github link</a> and ultimately adapting it to my own needs.</p>
<p>I'm going to work off of a template that I used in a previous blog post, <a href="https://github.com/nfisher23/webflux-and-dynamo">here is the source code on Github</a>.</p>
<h2 id="configuring-an-embedded-dynamo-instance">Configuring an embedded Dynamo instance</h2>
<p>To start, to make it &quot;cross platform&quot; you'll need to do some funky things in your pom file. First, ensure that you're pointing to the correct maven instance by adding the dynamo repository:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span>    &amp;lt;repositories&amp;gt;
</span></span><span style="display:flex;"><span>        &amp;lt;repository&amp;gt;
</span></span><span style="display:flex;"><span>            &amp;lt;id&amp;gt;dynamodblocal&amp;lt;/id&amp;gt;
</span></span><span style="display:flex;"><span>            &amp;lt;name&amp;gt;AWS DynamoDB Local Release Repository&amp;lt;/name&amp;gt;
</span></span><span style="display:flex;"><span>            &amp;lt;url&amp;gt;https://s3-us-west-2.amazonaws.com/dynamodb-local/release&amp;lt;/url&amp;gt;
</span></span><span style="display:flex;"><span>        &amp;lt;/repository&amp;gt;
</span></span><span style="display:flex;"><span>    &amp;lt;/repositories&amp;gt;
</span></span></code></pre></div><p>The actual dependencies you'll need seem to be basically these two:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span>        &amp;lt;dependency&amp;gt;
</span></span><span style="display:flex;"><span>            &amp;lt;groupId&amp;gt;com.amazonaws&amp;lt;/groupId&amp;gt;
</span></span><span style="display:flex;"><span>            &amp;lt;artifactId&amp;gt;DynamoDBLocal&amp;lt;/artifactId&amp;gt;
</span></span><span style="display:flex;"><span>            &amp;lt;version&amp;gt;1.13.2&amp;lt;/version&amp;gt;
</span></span><span style="display:flex;"><span>            &amp;lt;scope&amp;gt;test&amp;lt;/scope&amp;gt;
</span></span><span style="display:flex;"><span>        &amp;lt;/dependency&amp;gt;
</span></span><span style="display:flex;"><span>        &amp;lt;dependency&amp;gt;
</span></span><span style="display:flex;"><span>            &amp;lt;groupId&amp;gt;com.almworks.sqlite4java&amp;lt;/groupId&amp;gt;
</span></span><span style="display:flex;"><span>            &amp;lt;artifactId&amp;gt;sqlite4java&amp;lt;/artifactId&amp;gt;
</span></span><span style="display:flex;"><span>            &amp;lt;version&amp;gt;1.0.392&amp;lt;/version&amp;gt;
</span></span><span style="display:flex;"><span>            &amp;lt;scope&amp;gt;test&amp;lt;/scope&amp;gt;
</span></span><span style="display:flex;"><span>        &amp;lt;/dependency&amp;gt;
</span></span></code></pre></div><p>And now is where things might get a little weird. We need to pass in a system property variable for sqlite, which embedded dynamo is using under the hood, and add a dynamo package to the manifest. So first you'll add two plugin configs:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span>            &amp;lt;plugin&amp;gt;
</span></span><span style="display:flex;"><span>                &amp;lt;groupId&amp;gt;org.apache.maven.plugins&amp;lt;/groupId&amp;gt;
</span></span><span style="display:flex;"><span>                &amp;lt;artifactId&amp;gt;maven-dependency-plugin&amp;lt;/artifactId&amp;gt;
</span></span><span style="display:flex;"><span>                &amp;lt;executions&amp;gt;
</span></span><span style="display:flex;"><span>                    &amp;lt;execution&amp;gt;
</span></span><span style="display:flex;"><span>                        &amp;lt;id&amp;gt;copy&amp;lt;/id&amp;gt;
</span></span><span style="display:flex;"><span>                        &amp;lt;phase&amp;gt;test-compile&amp;lt;/phase&amp;gt;
</span></span><span style="display:flex;"><span>                        &amp;lt;goals&amp;gt;
</span></span><span style="display:flex;"><span>                            &amp;lt;goal&amp;gt;copy-dependencies&amp;lt;/goal&amp;gt;
</span></span><span style="display:flex;"><span>                        &amp;lt;/goals&amp;gt;
</span></span><span style="display:flex;"><span>                        &amp;lt;configuration&amp;gt;
</span></span><span style="display:flex;"><span>                            &amp;lt;includeScope&amp;gt;test&amp;lt;/includeScope&amp;gt;
</span></span><span style="display:flex;"><span>                            &amp;lt;includeTypes&amp;gt;so,dll,dylib&amp;lt;/includeTypes&amp;gt;
</span></span><span style="display:flex;"><span>                            &amp;lt;outputDirectory&amp;gt;${project.build.directory}/native-libs&amp;lt;/outputDirectory&amp;gt;
</span></span><span style="display:flex;"><span>                        &amp;lt;/configuration&amp;gt;
</span></span><span style="display:flex;"><span>                    &amp;lt;/execution&amp;gt;
</span></span><span style="display:flex;"><span>                &amp;lt;/executions&amp;gt;
</span></span><span style="display:flex;"><span>            &amp;lt;/plugin&amp;gt;
</span></span><span style="display:flex;"><span>            &amp;lt;plugin&amp;gt;
</span></span><span style="display:flex;"><span>                &amp;lt;groupId&amp;gt;org.apache.maven.plugins&amp;lt;/groupId&amp;gt;
</span></span><span style="display:flex;"><span>                &amp;lt;artifactId&amp;gt;maven-jar-plugin&amp;lt;/artifactId&amp;gt;
</span></span><span style="display:flex;"><span>                &amp;lt;configuration&amp;gt;
</span></span><span style="display:flex;"><span>                    &amp;lt;archive&amp;gt;
</span></span><span style="display:flex;"><span>                        &amp;lt;manifestEntries&amp;gt;
</span></span><span style="display:flex;"><span>                            &amp;lt;Automatic-Module-Name&amp;gt;software.amazon.awssdk.enhanced.dynamodb&amp;lt;/Automatic-Module-Name&amp;gt;
</span></span><span style="display:flex;"><span>                        &amp;lt;/manifestEntries&amp;gt;
</span></span><span style="display:flex;"><span>                    &amp;lt;/archive&amp;gt;
</span></span><span style="display:flex;"><span>                &amp;lt;/configuration&amp;gt;
</span></span><span style="display:flex;"><span>            &amp;lt;/plugin&amp;gt;
</span></span></code></pre></div><p>Then some plugin management config:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span>        &amp;lt;pluginManagement&amp;gt;
</span></span><span style="display:flex;"><span>            &amp;lt;plugins&amp;gt;
</span></span><span style="display:flex;"><span>                &amp;lt;plugin&amp;gt;
</span></span><span style="display:flex;"><span>                    &amp;lt;groupId&amp;gt;org.apache.maven.plugins&amp;lt;/groupId&amp;gt;
</span></span><span style="display:flex;"><span>                    &amp;lt;artifactId&amp;gt;maven-surefire-plugin&amp;lt;/artifactId&amp;gt;
</span></span><span style="display:flex;"><span>                    &amp;lt;configuration&amp;gt;
</span></span><span style="display:flex;"><span>                        &amp;lt;systemPropertyVariables&amp;gt;
</span></span><span style="display:flex;"><span>                            &amp;lt;sqlite4java.library.path&amp;gt;${project.build.directory}/native-libs&amp;lt;/sqlite4java.library.path&amp;gt;
</span></span><span style="display:flex;"><span>                        &amp;lt;/systemPropertyVariables&amp;gt;
</span></span><span style="display:flex;"><span>                    &amp;lt;/configuration&amp;gt;
</span></span><span style="display:flex;"><span>                &amp;lt;/plugin&amp;gt;
</span></span><span style="display:flex;"><span>            &amp;lt;/plugins&amp;gt;
</span></span><span style="display:flex;"><span>        &amp;lt;/pluginManagement&amp;gt;
</span></span></code></pre></div><p>Now, on my machine, which is running linux mint, i was able to get this code to run and pass:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">class</span> <span style="color:#50fa7b">PhoneServiceTest</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">private</span> <span style="color:#8be9fd;font-style:italic">static</span> DynamoDBProxyServer dynamoProxy;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">private</span> <span style="color:#8be9fd;font-style:italic">static</span> <span style="color:#8be9fd">int</span> port;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">private</span> <span style="color:#8be9fd;font-style:italic">static</span> <span style="color:#8be9fd">int</span> <span style="color:#50fa7b">getFreePort</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">try</span> {
</span></span><span style="display:flex;"><span>            ServerSocket socket <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> ServerSocket(0);
</span></span><span style="display:flex;"><span>            <span style="color:#8be9fd">int</span> port <span style="color:#ff79c6">=</span> socket.<span style="color:#50fa7b">getLocalPort</span>();
</span></span><span style="display:flex;"><span>            socket.<span style="color:#50fa7b">close</span>();
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">return</span> port;
</span></span><span style="display:flex;"><span>        } <span style="color:#ff79c6">catch</span> (IOException ioe) {
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">throw</span> <span style="color:#ff79c6">new</span> RuntimeException(ioe);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @BeforeAll
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">static</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">setupDynamo</span>() {
</span></span><span style="display:flex;"><span>        port <span style="color:#ff79c6">=</span> getFreePort();
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">try</span> {
</span></span><span style="display:flex;"><span>            dynamoProxy <span style="color:#ff79c6">=</span> ServerRunner.<span style="color:#50fa7b">createServerFromCommandLineArgs</span>(<span style="color:#ff79c6">new</span> String<span style="color:#ff79c6">[]</span>{
</span></span><span style="display:flex;"><span>                    <span style="color:#ff79c6">&amp;</span>#34;<span style="color:#ff79c6">-</span>inMemory<span style="color:#ff79c6">&amp;</span>#34;,
</span></span><span style="display:flex;"><span>                    <span style="color:#ff79c6">&amp;</span>#34;<span style="color:#ff79c6">-</span>port<span style="color:#ff79c6">&amp;</span>#34;,
</span></span><span style="display:flex;"><span>                    Integer.<span style="color:#50fa7b">toString</span>(port)
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>            dynamoProxy.<span style="color:#50fa7b">start</span>();
</span></span><span style="display:flex;"><span>        } <span style="color:#ff79c6">catch</span> (Exception e) {
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">throw</span> <span style="color:#ff79c6">new</span> RuntimeException();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @AfterAll
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">static</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">teardownDynamo</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">try</span> {
</span></span><span style="display:flex;"><span>            dynamoProxy.<span style="color:#50fa7b">stop</span>();
</span></span><span style="display:flex;"><span>        } <span style="color:#ff79c6">catch</span> (Exception e) {
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">throw</span> <span style="color:#ff79c6">new</span> RuntimeException();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Test
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">testStuff</span>() <span style="color:#8be9fd;font-style:italic">throws</span> Exception {
</span></span><span style="display:flex;"><span>        DynamoDbAsyncClient client <span style="color:#ff79c6">=</span> DynamoDbAsyncClient.<span style="color:#50fa7b">builder</span>()
</span></span><span style="display:flex;"><span>                .<span style="color:#50fa7b">region</span>(Region.<span style="color:#50fa7b">US_EAST_1</span>)
</span></span><span style="display:flex;"><span>                .<span style="color:#50fa7b">endpointOverride</span>(URI.<span style="color:#50fa7b">create</span>(<span style="color:#ff79c6">&amp;</span>#34;http:<span style="color:#6272a4">//localhost:&amp;#34; &amp;#43; port))</span>
</span></span><span style="display:flex;"><span>                .<span style="color:#50fa7b">credentialsProvider</span>(StaticCredentialsProvider.<span style="color:#50fa7b">create</span>(
</span></span><span style="display:flex;"><span>                        AwsBasicCredentials.<span style="color:#50fa7b">create</span>(<span style="color:#ff79c6">&amp;</span>#34;FAKE<span style="color:#ff79c6">&amp;</span>#34;, <span style="color:#ff79c6">&amp;</span>#34;FAKE<span style="color:#ff79c6">&amp;</span>#34;)))
</span></span><span style="display:flex;"><span>                .<span style="color:#50fa7b">build</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        ListTablesResponse listTablesResponse <span style="color:#ff79c6">=</span> client.<span style="color:#50fa7b">listTables</span>().<span style="color:#50fa7b">get</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        assertThat(listTablesResponse.<span style="color:#50fa7b">tableNames</span>().<span style="color:#50fa7b">size</span>()).<span style="color:#50fa7b">isEqualTo</span>(0);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        client.<span style="color:#50fa7b">createTable</span>(CreateTableRequest.<span style="color:#50fa7b">builder</span>()
</span></span><span style="display:flex;"><span>                .<span style="color:#50fa7b">keySchema</span>(
</span></span><span style="display:flex;"><span>                        KeySchemaElement.<span style="color:#50fa7b">builder</span>().<span style="color:#50fa7b">keyType</span>(KeyType.<span style="color:#50fa7b">HASH</span>).<span style="color:#50fa7b">attributeName</span>(<span style="color:#ff79c6">&amp;</span>#34;Company<span style="color:#ff79c6">&amp;</span>#34;).<span style="color:#50fa7b">build</span>(),
</span></span><span style="display:flex;"><span>                        KeySchemaElement.<span style="color:#50fa7b">builder</span>().<span style="color:#50fa7b">keyType</span>(KeyType.<span style="color:#50fa7b">RANGE</span>).<span style="color:#50fa7b">attributeName</span>(<span style="color:#ff79c6">&amp;</span>#34;Model<span style="color:#ff79c6">&amp;</span>#34;).<span style="color:#50fa7b">build</span>()
</span></span><span style="display:flex;"><span>                )
</span></span><span style="display:flex;"><span>                .<span style="color:#50fa7b">attributeDefinitions</span>(
</span></span><span style="display:flex;"><span>                        AttributeDefinition.<span style="color:#50fa7b">builder</span>().<span style="color:#50fa7b">attributeName</span>(<span style="color:#ff79c6">&amp;</span>#34;Company<span style="color:#ff79c6">&amp;</span>#34;).<span style="color:#50fa7b">attributeType</span>(ScalarAttributeType.<span style="color:#50fa7b">S</span>).<span style="color:#50fa7b">build</span>(),
</span></span><span style="display:flex;"><span>                        AttributeDefinition.<span style="color:#50fa7b">builder</span>().<span style="color:#50fa7b">attributeName</span>(<span style="color:#ff79c6">&amp;</span>#34;Model<span style="color:#ff79c6">&amp;</span>#34;).<span style="color:#50fa7b">attributeType</span>(ScalarAttributeType.<span style="color:#50fa7b">S</span>).<span style="color:#50fa7b">build</span>()
</span></span><span style="display:flex;"><span>                )
</span></span><span style="display:flex;"><span>                .<span style="color:#50fa7b">provisionedThroughput</span>(ProvisionedThroughput.<span style="color:#50fa7b">builder</span>().<span style="color:#50fa7b">readCapacityUnits</span>(100L).<span style="color:#50fa7b">writeCapacityUnits</span>(100L).<span style="color:#50fa7b">build</span>())
</span></span><span style="display:flex;"><span>                .<span style="color:#50fa7b">tableName</span>(<span style="color:#ff79c6">&amp;</span>#34;Phones<span style="color:#ff79c6">&amp;</span>#34;)
</span></span><span style="display:flex;"><span>                .<span style="color:#50fa7b">build</span>())
</span></span><span style="display:flex;"><span>                .<span style="color:#50fa7b">get</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        ListTablesResponse listTablesResponseAfterCreation <span style="color:#ff79c6">=</span> client.<span style="color:#50fa7b">listTables</span>().<span style="color:#50fa7b">get</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        assertThat(listTablesResponseAfterCreation.<span style="color:#50fa7b">tableNames</span>().<span style="color:#50fa7b">size</span>()).<span style="color:#50fa7b">isEqualTo</span>(1);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>As seems pretty obvious here, we're starting up dynamo before we run our test, we are creating a tale with a hash and range key named <strong>Phones</strong>, then we are verifying that the table was created by listing all the tables [there should be one table after we create it, somewhat obviously]. This test passes for me and is good enough to get started with.</p>
<p>You might want to take that example demonstrating it in github if you're having trouble getting this to work on your OS, since this solution doesn't seem to have the abstractions setup just yet. Otherwise, I am at least happy this appears to be working for now on my box.</p>
</section>

  
    
  

    
  


  <footer>
    
      <div class="pb-14 taxonomy-list tags-list">
      
        <a href="/tags/java/" alt="Java">
          Java
        </a>
      
        <a href="/tags/reactive/" alt="Reactive">
          Reactive
        </a>
      
        <a href="/tags/aws/" alt="Aws">
          Aws
        </a>
      
        <a href="/tags/dynamodb/" alt="Dynamodb">
          Dynamodb
        </a>
      
        <a href="/tags/webflux/" alt="Webflux">
          Webflux
        </a>
      
      </div>
    
  </footer>
</article>


    </main><footer class="pt-5 pb-10 grid gap-3 sm:grid-cols-2">
    <div class="text-xs font-semibold text-gray-500 order-2 sm:order-1">
  © 2018-2025 —
  <a href="http://localhost:1313/">Nick Fisher&#39;s tech blog</a> 
</div>

    <div class="order-1 sm:order-2">
  <ul class="flex sm:justify-end gap-5">
    
    
    <li>    
      <a href="https://www.linkedin.com/in/nick-fisher-software/" target="_blank" rel="noopener noreferrer">LinkedIn</a>
    </li>
    
    <li>    
      <a href="https://github.com/nfisher23" target="_blank" rel="noopener noreferrer">GitHub</a>
    </li>
    
    
  </ul>
</div>

</footer></body>
</html>
