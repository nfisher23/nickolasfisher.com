<!DOCTYPE html>
<html lang="en-US" class="scroll-smooth dark">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>

<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>How to Set Up ClickOnce Continuous Deployment for WPF via Nginx</title>
<meta
  name="description"
  content="I&#39;ve been working on a small wpf project on GitHub that let&#39;s you view SEC filings on your desktop in an intuitive way. Since EDGAR kind of sucks for a casual user, this is much more appealing."
/>
<link rel="canonical" href="http://localhost:1313/blog/how-to-set-up-clickonce-continuous-deployment-for-wpf-via-nginx/" />
<link rel="robots" href="/robots.txt" />

<link rel="icon" type="image/x-icon" href="/icons/favicon.ico" />



<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']] } });</script>

<link rel="stylesheet" href="http://localhost:1313/css/app.css" /></head>

  <body class="max-w-screen-md mx-auto px-2.5">
    <div class="header">
      <header class="flex flex-col sm:flex-row items-center gap-5 sm:gap-10 pt-16 py-12">
   


<div class="flex-none w-20 h-20 rounded-full overflow-hidden">
  <a href="http://localhost:1313/">
    <img
      srcset="/img/profile-picture_hu4241499301404582006.jpg 80w"
      src="/img/profile-picture.jpg"
      width="386"
      height="345"
      alt="Nick Fisher&#39;s tech blog"
    />
  </a>
</div>

  
  <div class="flex flex-col gap-5">
    <a href="http://localhost:1313/">
  <h1 id="site-title">Nick Fisher&#39;s tech blog</h1>
</a>
 
    <nav>
  <ul>
     
    
    <li>
      <a href="/" class="">
        Home
      </a>
    </li>
    
    <li>
      <a href="/blog" class="">
        Blog
      </a>
    </li>
    
    <li>
      <a href="/about" class="">
        About me
      </a>
    </li>
    
    <li>
      <a href="/categories" class="">
        Categories
      </a>
    </li>
    
    <li>
      <a href="/tags" class="">
        Tags
      </a>
    </li>
    
  </ul>
</nav>

  </div>
</header>

      <button class="toggle-theme" aria-label="Toggle Theme" title="Toggle Theme" onclick="toggleTheme()">
  <span class="theme-icon light"> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" />
</svg> </span>
  <span class="theme-icon dark"> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" d="M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z" />
</svg> </span>
</button>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const theme = localStorage.getItem('theme');

    if (!theme || theme === 'light') {
      setTheme('light');
    } else {
      setTheme(theme);
    }
  });

  function setTheme(theme) {
    const html = document.querySelector('html');
    localStorage.setItem('theme', theme);

    if (theme === 'light') {
      if (html.classList.contains('dark')) {
        document.querySelector('html').classList.remove('dark');
      }

      document.querySelector('.theme-icon.light').style.display = 'none';
      document.querySelector('.theme-icon.dark').style.display = 'block';
    } else {
      if (!html.classList.contains('dark')) {
        document.querySelector('html').classList.add('dark');
      }

      document.querySelector('.theme-icon.dark').style.display = 'none';
      document.querySelector('.theme-icon.light').style.display = 'block';
    }
  }

  function toggleTheme() {
    const theme = localStorage.getItem('theme');

    if (theme === 'light') {
      setTheme('dark');
    } else {
      setTheme('light');
    }
  }
</script>
    </div>
  
    <main id="content">

<article class="flex flex-col gap-10">
  <header class="flex flex-col gap-2">
    <h2 class="title-large">How to Set Up ClickOnce Continuous Deployment for WPF via Nginx</h2>

    <div class="meta">
      
      <time datetime="2018-08-01 00:00:00 &#43;0000 UTC" title='Wed, Aug 1, 2018, 12:00 AM UTC'>
        01/08/2018 - Estimated reading time: 4 minutes
      </time>

       
      
    </div>
  </header>

  

  <section><p>I've been working on a small wpf project on GitHub that let's you <a href="https://github.com/nfisher23/SEPubViewer">view SEC filings on your desktop</a> in an intuitive way. Since EDGAR kind of sucks for a casual user, this is much more appealing.</p>
<p>To deploy this solution, the most current technology is provided by Microsoft and called <a href="https://docs.microsoft.com/en-us/visualstudio/deployment/clickonce-security-and-deployment">ClickOnce</a>. If I'm being frank, my experience with ClickOnce has left me pretty underwhelmed, mostly because to install something on a system without warning the user that their computer is about to be obliterated, a certificate needs to be obtained from a trusted CA. That would be fine, and in fact that's how SSL/TLS certificates work on the web, except that these certificates usually cost quite a bit of money for an individual developer, and from what I've found there does not appear to be a <a href="https://letsencrypt.org/">Let's Encrypt</a>-type solution which is, well, free. But you can still get ClickOnce working to publish an app, it just means your user is going to get a &quot;This is not a recognized publisher&quot; warning when you go ahead and give it to them. Not an ideal solution, but it does allow for faster continuous delivery of your WPF applications than creating a bunch of boilerplate code to check for updates via an API.</p>
<p>To successfully complete this tutorial, you will need <a href="https://gitforwindows.org/">GitBash</a>, your own VPS (I suggest <a href="https://www.digitalocean.com/">Digital Ocean</a>), and a WPF application to deploy.</p>
<h3 id="make-a-wpf-app-and-publish-it">Make a WPF app and Publish it</h3>
<p>To get started, you must create a WPF application. You can use the one I'm developing on GitHub if you like. Then go to the publish page by right-clicking on your csproj file, select <code>Properties</code>, then click on the <code>Publish</code> sidebar option. Here, click on <code>Publish Wizard...</code>.</p>
<p>First, it asks you where you want to publish the application. Select a local, <strong>empty</strong> directory, and for your Installation Folder URL, choose the base URL you're using to distribute the installation package. If you have a website, I suggest a subdomain like downloads.mydomain.com, which you'll have to configure the DNS settings for, obviously.</p>
<h3 id="configure-nginx-on-your-server">Configure Nginx on Your Server</h3>
<p>Now get on git bash and connect to your server via ssh (try <a href="https://www.digitalocean.com/community/tutorials/how-to-connect-to-your-droplet-with-ssh">this DO article on ssh connection</a> if you're confused here). Once up there, install Nginx via <code>sudo apt-get install Nginx</code>. Now, choose a directory to place the files you're going to want Nginx to serve. I suggest something like /var/www/myapplicationfiles/. In your Nginx sites-enabled file, you can adjust the default server configuration ( <code>pico /etc/nginx/sites-enabled/default</code>) to look like this:</p>
<pre tabindex="0"><code>server {
        listen 80;
        listen[::]:80;

        server_name mysite.come www.mysite.com;

        location / {
                root /var/www/myapplicationfiles;
                index publish.htm;
        }
}
</code></pre><p>Finally, and this is the part that took me an embarrassingly long time to get exactly right, you have to configure the MIME type response to conform to how Windows wants you to conform to. To be specific, open up your /etc/nginx/mime.types file and add the following records:</p>
<pre tabindex="0"><code>application/x-ms-application    application;
application/x-ms-manifest       manifest;
application/octet-stream        deploy;
application/octet-stream        msu;
application/octet-stream        msp;
</code></pre><p>For more info, see <a href="https://docs.microsoft.com/en-us/visualstudio/deployment/server-and-client-configuration-issues-in-clickonce-deployments">Server and Client Config Issues</a>.</p>
<h3 id="copy-your-publish-wpf-directory-to-your-server">Copy Your Publish WPF Directory To Your Server</h3>
<p>Finally, we're ready to push this bad boy up. Exit out of your ssh session, navigate to the folder where you published your WPF application, and (if you're inside the folder), type <code>scp -r * root@yourdomain:/var/www/myapplicationfiles/</code>. Hit enter, and you should be good to go. If you head to yourdomain.com/, it will serve up your install page (which looks pretty weak at the start). If you install the program, every time you run it thereafter it will check the domain you publish to for updates. If the version number is greater than the version number on file, it will prompt the user and automatically update. No admin privileges required.</p>
<p>To get rid of the annoying &quot;this isn't a trusted app&quot; box, like I said, you'll have to pay for a not-so-cheap certificate from a CA, and renew that certificate every year or so. That barrier to entry is going to inhibit the growth of WPF applications on Windows Desktops, which is a shame, because WPF is actually pretty neat technology.</p>
<p>Also, don't use git to push the files up via a repo and a post-receive file. For some reason (probably due to an interpreted change in the .manifest file from what I can tell), this causes problems. And it will make you a sad debugging panda.</p>
</section>

  
    
  

    
  


  <footer>
    
  </footer>
</article>


    </main><footer class="pt-5 pb-10 grid gap-3 sm:grid-cols-2">
    <div class="text-xs font-semibold text-gray-500 order-2 sm:order-1">
  © 2018-2025 —
  <a href="http://localhost:1313/">Nick Fisher&#39;s tech blog</a> 
</div>

    <div class="order-1 sm:order-2">
  <ul class="flex sm:justify-end gap-5">
    
    
    <li>    
      <a href="https://www.linkedin.com/in/nick-fisher-software/" target="_blank" rel="noopener noreferrer">LinkedIn</a>
    </li>
    
    <li>    
      <a href="https://github.com/nfisher23" target="_blank" rel="noopener noreferrer">GitHub</a>
    </li>
    
    
  </ul>
</div>

</footer></body>
</html>
