<!DOCTYPE html>
<html lang="en-US" class="scroll-smooth dark">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>

<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>How to Use Spring&amp;#39;s Dependency Injection in Setup And Teardown Code For Integration Tests With Maven</title>
<meta
  name="description"
  content="You can view the sample code for this repository on GitHub.
In our last post on Using Maven to Setup and Teardown Integration Tests, we saw how to run Java code before and after our integration tests to setup and teardown any data that our tests depended on. What if we are using Spring, and we want to use our ApplicationContext, and its dependency injection/property injection features? After all, we would be testing the configuration for our specific application more than anything else, so we should be certain to use it in our setup and teardown code."
/>
<link rel="canonical" href="http://localhost:1313/blog/how-to-use-springs-dependency-injection-in-setup-and-teardown-code-for-integration-tests-with-maven/" />
<link rel="robots" href="/robots.txt" />

<link rel="icon" type="image/x-icon" href="/icons/favicon.ico" />



<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']] } });</script>

<link rel="stylesheet" href="http://localhost:1313/css/app.css" /></head>

  <body class="max-w-screen-md mx-auto px-2.5">
    <div class="header">
      <header class="flex flex-col sm:flex-row items-center gap-5 sm:gap-10 pt-16 py-12">
   


<div class="flex-none w-20 h-20 rounded-full overflow-hidden">
  <a href="http://localhost:1313/">
    <img
      srcset="/img/profile-picture_hu4241499301404582006.jpg 80w"
      src="/img/profile-picture.jpg"
      width="386"
      height="345"
      alt="Nick Fisher&#39;s tech blog"
    />
  </a>
</div>

  
  <div class="flex flex-col gap-5">
    <a href="http://localhost:1313/">
  <h1 id="site-title">Nick Fisher&#39;s tech blog</h1>
</a>
 
    <nav>
  <ul>
     
    
    <li>
      <a href="/" class="">
        Home
      </a>
    </li>
    
    <li>
      <a href="/blog" class="">
        Blog
      </a>
    </li>
    
    <li>
      <a href="/about" class="">
        About me
      </a>
    </li>
    
    <li>
      <a href="/categories" class="">
        Categories
      </a>
    </li>
    
    <li>
      <a href="/tags" class="">
        Tags
      </a>
    </li>
    
  </ul>
</nav>

  </div>
</header>

      <button class="toggle-theme" aria-label="Toggle Theme" title="Toggle Theme" onclick="toggleTheme()">
  <span class="theme-icon light"> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" />
</svg> </span>
  <span class="theme-icon dark"> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" d="M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z" />
</svg> </span>
</button>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const theme = localStorage.getItem('theme');

    if (!theme || theme === 'light') {
      setTheme('light');
    } else {
      setTheme(theme);
    }
  });

  function setTheme(theme) {
    const html = document.querySelector('html');
    localStorage.setItem('theme', theme);

    if (theme === 'light') {
      if (html.classList.contains('dark')) {
        document.querySelector('html').classList.remove('dark');
      }

      document.querySelector('.theme-icon.light').style.display = 'none';
      document.querySelector('.theme-icon.dark').style.display = 'block';
    } else {
      if (!html.classList.contains('dark')) {
        document.querySelector('html').classList.add('dark');
      }

      document.querySelector('.theme-icon.dark').style.display = 'none';
      document.querySelector('.theme-icon.light').style.display = 'block';
    }
  }

  function toggleTheme() {
    const theme = localStorage.getItem('theme');

    if (theme === 'light') {
      setTheme('dark');
    } else {
      setTheme('light');
    }
  }
</script>
    </div>
  
    <main id="content">

<article class="flex flex-col gap-10">
  <header class="flex flex-col gap-2">
    <h2 class="title-large">How to Use Spring&amp;#39;s Dependency Injection in Setup And Teardown Code For Integration Tests With Maven</h2>

    <div class="meta">
      
      <time datetime="2018-11-24 15:51:32 &#43;0000 UTC" title='Sat, Nov 24, 2018, 3:51 PM UTC'>
        24/11/2018 - Estimated reading time: 3 minutes
      </time>

       
      
    </div>
  </header>

  

  <section><p>You can view the sample code for this repository <a href="https://github.com/nfisher23/integration-testing-postgres-and-spring">on GitHub</a>.</p>
<p>In our last post on <a href="https://nickolasfisher.com/blog/How-to-Run-Integration-Tests-with-Setup-and-Teardown-Code-in-Maven-Build">Using Maven to Setup and Teardown Integration Tests</a>, we saw how to run Java code before and after our integration tests to setup and teardown any data that our tests depended on. What if we are using Spring, and we want to use our ApplicationContext, and its dependency injection/property injection features? After all, we would be testing the configuration for our specific application more than anything else, so we should be certain to use it in our setup and teardown code.</p>
<p>To demonstrate, refer to my post on <a href="https://nickolasfisher.com/blog/How-to-Set-Up-a-Local-Unsecured-Postgres-Virtual-Machine-for-testing">setting up an unsecured local postgreSQL VM for testing purposes</a>. Assuming you have this vagrant VM up and running, we can create a simple bean for our data source and a JdbcTemplate like so:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Configuration
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">class</span> <span style="color:#50fa7b">AppConfig</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Autowired
</span></span><span style="display:flex;"><span>    Environment environment;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Bean
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">public</span> DataSource <span style="color:#50fa7b">dataSource</span>() {
</span></span><span style="display:flex;"><span>        HikariDataSource ds <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> HikariDataSource();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        ds.<span style="color:#50fa7b">setJdbcUrl</span>(environment.<span style="color:#50fa7b">getProperty</span>(<span style="color:#ff79c6">&amp;</span>#34;spring.<span style="color:#50fa7b">datasource</span>.<span style="color:#50fa7b">url</span><span style="color:#ff79c6">&amp;</span>#34;));
</span></span><span style="display:flex;"><span>        ds.<span style="color:#50fa7b">setUsername</span>(environment.<span style="color:#50fa7b">getProperty</span>(<span style="color:#ff79c6">&amp;</span>#34;spring.<span style="color:#50fa7b">datasource</span>.<span style="color:#50fa7b">username</span><span style="color:#ff79c6">&amp;</span>#34;));
</span></span><span style="display:flex;"><span>        ds.<span style="color:#50fa7b">setPassword</span>(environment.<span style="color:#50fa7b">getProperty</span>(<span style="color:#ff79c6">&amp;</span>#34;spring.<span style="color:#50fa7b">datasource</span>.<span style="color:#50fa7b">password</span><span style="color:#ff79c6">&amp;</span>#34;));
</span></span><span style="display:flex;"><span>        ds.<span style="color:#50fa7b">setDriverClassName</span>(environment.<span style="color:#50fa7b">getProperty</span>(<span style="color:#ff79c6">&amp;</span>#34;spring.<span style="color:#50fa7b">datasource</span>.<span style="color:#50fa7b">driver</span><span style="color:#ff79c6">-</span><span style="color:#8be9fd;font-style:italic">class</span>-<span style="color:#50fa7b">name</span><span style="color:#ff79c6">&amp;</span>#34;));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">return</span> ds;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Bean
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">public</span> JdbcTemplate <span style="color:#50fa7b">jdbcTemplate</span>(DataSource ds) {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">return</span> <span style="color:#ff79c6">new</span> JdbcTemplate(ds);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>And we'll configure our datasource via the application.yml properties file in our resources folder:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#ff79c6">spring</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">datasource</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">password</span>: postgres
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">username</span>: postgres
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">url</span>: jdbc:postgresql://192.168.56.111:5432/testdb
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">driver-class-name</span>: org.postgresql.Driver
</span></span></code></pre></div><p>Our integration test will run a query against a TMP_TABLE table, and validate that we have two entries which are (1, &quot;first&quot;) and (2, &quot;second&quot;):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@RunWith(SpringRunner.<span style="color:#50fa7b">class</span>)
</span></span><span style="display:flex;"><span>@SpringBootTest(classes <span style="color:#ff79c6">=</span> {AppConfig.<span style="color:#50fa7b">class</span>})
</span></span><span style="display:flex;"><span>@ComponentScan(value <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">&amp;</span>#34;com.<span style="color:#50fa7b">nickolasfisher</span>.<span style="color:#50fa7b">postgresintegration</span><span style="color:#ff79c6">&amp;</span>#34;)
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">class</span> <span style="color:#50fa7b">PostgresAppIT</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Autowired
</span></span><span style="display:flex;"><span>    JdbcTemplate jdbcTemplate;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Test
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">validateQueryOnRealDB</span>() {
</span></span><span style="display:flex;"><span>        List<span style="color:#ff79c6">&amp;</span>lt;KeyValuePair<span style="color:#ff79c6">&amp;</span>gt; pairs <span style="color:#ff79c6">=</span> jdbcTemplate.<span style="color:#50fa7b">query</span>(<span style="color:#ff79c6">&amp;</span>#34;SELECT mykey, myvalue FROM TMP_TABLE ORDER BY mykey asc<span style="color:#ff79c6">&amp;</span>#34;, (rs, rowNum) <span style="color:#ff79c6">-&amp;</span>gt;
</span></span><span style="display:flex;"><span>                <span style="color:#ff79c6">new</span> KeyValuePair(rs.<span style="color:#50fa7b">getInt</span>(1), rs.<span style="color:#50fa7b">getString</span>(2)));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        assertEquals(<span style="color:#ff79c6">&amp;</span>#34;first<span style="color:#ff79c6">&amp;</span>#34;, pairs.<span style="color:#50fa7b">get</span>(0).<span style="color:#50fa7b">getValue</span>());
</span></span><span style="display:flex;"><span>        assertEquals(1, pairs.<span style="color:#50fa7b">get</span>(0).<span style="color:#50fa7b">getKey</span>().<span style="color:#50fa7b">intValue</span>());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        assertEquals(2, pairs.<span style="color:#50fa7b">get</span>(1).<span style="color:#50fa7b">getKey</span>().<span style="color:#50fa7b">intValue</span>());
</span></span><span style="display:flex;"><span>        assertEquals(<span style="color:#ff79c6">&amp;</span>#34;second<span style="color:#ff79c6">&amp;</span>#34;, pairs.<span style="color:#50fa7b">get</span>(1).<span style="color:#50fa7b">getValue</span>());
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">private</span> <span style="color:#8be9fd;font-style:italic">class</span> <span style="color:#50fa7b">KeyValuePair</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">private</span> Integer key;
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">private</span> String value;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#50fa7b">KeyValuePair</span>(Integer key, String value) {
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">this</span>.<span style="color:#50fa7b">key</span> <span style="color:#ff79c6">=</span> key;
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">this</span>.<span style="color:#50fa7b">value</span> <span style="color:#ff79c6">=</span> value;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">public</span> String <span style="color:#50fa7b">getValue</span>() {
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">return</span> value;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">public</span> Integer <span style="color:#50fa7b">getKey</span>() {
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">return</span> key;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>If we then want to set up and teardown our data for this test, we need to create the table if it doesn't exist, insert the appropriate data, then destroy the data or the table in our teardown environment. Thankfully, we can access the application context by getting the return value on SpringApplication.run(..) and getting any beans we want out of that:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@ComponentScan(<span style="color:#ff79c6">&amp;</span>#34;com.<span style="color:#50fa7b">nickolasfisher</span>.<span style="color:#50fa7b">postgresintegration</span><span style="color:#ff79c6">&amp;</span>#34;)
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">class</span> <span style="color:#50fa7b">PreIntegrationSetup</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">static</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">main</span>(String args<span style="color:#ff79c6">[]</span>) {
</span></span><span style="display:flex;"><span>        ConfigurableApplicationContext ctx <span style="color:#ff79c6">=</span> SpringApplication.<span style="color:#50fa7b">run</span>(PreIntegrationSetup.<span style="color:#50fa7b">class</span>, args);
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">try</span> {
</span></span><span style="display:flex;"><span>            createTmpTable(ctx);
</span></span><span style="display:flex;"><span>            insertTmpData(ctx);
</span></span><span style="display:flex;"><span>        } <span style="color:#ff79c6">catch</span> (Exception e) {
</span></span><span style="display:flex;"><span>            System.<span style="color:#50fa7b">out</span>.<span style="color:#50fa7b">println</span>(<span style="color:#ff79c6">&amp;</span>#34;you blew up in your setup code: <span style="color:#ff79c6">&amp;</span>#34; <span style="color:#ff79c6">&amp;</span>#43; e.<span style="color:#50fa7b">toString</span>());
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        ctx.<span style="color:#50fa7b">registerShutdownHook</span>();
</span></span><span style="display:flex;"><span>        ctx.<span style="color:#50fa7b">close</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">private</span> <span style="color:#8be9fd;font-style:italic">static</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">createTmpTable</span>(ApplicationContext ctx) {
</span></span><span style="display:flex;"><span>        JdbcTemplate jdbcTemplate <span style="color:#ff79c6">=</span> ctx.<span style="color:#50fa7b">getBean</span>(JdbcTemplate.<span style="color:#50fa7b">class</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        jdbcTemplate.<span style="color:#50fa7b">update</span>(<span style="color:#ff79c6">&amp;</span>#34;CREATE TABLE <span style="color:#50fa7b">TMP_TABLE</span> (mykey INTEGER, myvalue text)<span style="color:#ff79c6">&amp;</span>#34;);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">private</span> <span style="color:#8be9fd;font-style:italic">static</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">insertTmpData</span>(ApplicationContext ctx) {
</span></span><span style="display:flex;"><span>        JdbcTemplate jdbcTemplate <span style="color:#ff79c6">=</span> ctx.<span style="color:#50fa7b">getBean</span>(JdbcTemplate.<span style="color:#50fa7b">class</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        jdbcTemplate.<span style="color:#50fa7b">update</span>(<span style="color:#ff79c6">&amp;</span>#34;INSERT INTO <span style="color:#50fa7b">TMP_TABLE</span> (mykey, myvalue) VALUES (1, <span style="color:#ff79c6">&amp;</span>#39;first<span style="color:#ff79c6">&amp;</span>#39;)<span style="color:#ff79c6">&amp;</span>#34;);
</span></span><span style="display:flex;"><span>        jdbcTemplate.<span style="color:#50fa7b">update</span>(<span style="color:#ff79c6">&amp;</span>#34;INSERT INTO <span style="color:#50fa7b">TMP_TABLE</span> (mykey, myvalue) VALUES (2, <span style="color:#ff79c6">&amp;</span>#39;second<span style="color:#ff79c6">&amp;</span>#39;)<span style="color:#ff79c6">&amp;</span>#34;);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>And we can teardown our data, in this case I will choose to destroy the table completely from the test database, like:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@ComponentScan(<span style="color:#ff79c6">&amp;</span>#34;com.<span style="color:#50fa7b">nickolasfisher</span>.<span style="color:#50fa7b">postgresintegration</span><span style="color:#ff79c6">&amp;</span>#34;)
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">class</span> <span style="color:#50fa7b">PostIntegrationTeardown</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">static</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">main</span>(String args<span style="color:#ff79c6">[]</span>) {
</span></span><span style="display:flex;"><span>        ConfigurableApplicationContext ctx <span style="color:#ff79c6">=</span> SpringApplication.<span style="color:#50fa7b">run</span>(PostIntegrationTeardown.<span style="color:#50fa7b">class</span>, args);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">try</span> {
</span></span><span style="display:flex;"><span>            destroyTmpTable(ctx);
</span></span><span style="display:flex;"><span>        } <span style="color:#ff79c6">catch</span> (Exception e) {
</span></span><span style="display:flex;"><span>            System.<span style="color:#50fa7b">out</span>.<span style="color:#50fa7b">println</span>(<span style="color:#ff79c6">&amp;</span>#34;you blew up in your teardown code: <span style="color:#ff79c6">&amp;</span>#34; <span style="color:#ff79c6">&amp;</span>#43; e.<span style="color:#50fa7b">toString</span>());
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        ctx.<span style="color:#50fa7b">registerShutdownHook</span>();
</span></span><span style="display:flex;"><span>        ctx.<span style="color:#50fa7b">close</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">private</span> <span style="color:#8be9fd;font-style:italic">static</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">destroyTmpTable</span>(ApplicationContext ctx) {
</span></span><span style="display:flex;"><span>        JdbcTemplate jdbcTemplate <span style="color:#ff79c6">=</span> ctx.<span style="color:#50fa7b">getBean</span>(JdbcTemplate.<span style="color:#50fa7b">class</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        jdbcTemplate.<span style="color:#50fa7b">update</span>(<span style="color:#ff79c6">&amp;</span>#34;DROP TABLE TMP_TABLE<span style="color:#ff79c6">&amp;</span>#34;);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Definitely go <a href="https://github.com/nfisher23/integration-testing-postgres-and-spring">download the source code</a> to see and tinker with this in action.</p>
</section>

  
    
  

    
  


  <footer>
    
      <div class="pb-14 taxonomy-list tags-list">
      
        <a href="/tags/java/" alt="Java">
          Java
        </a>
      
        <a href="/tags/spring/" alt="Spring">
          Spring
        </a>
      
        <a href="/tags/devops/" alt="DevOps">
          DevOps
        </a>
      
        <a href="/tags/maven/" alt="Maven">
          Maven
        </a>
      
      </div>
    
  </footer>
</article>


    </main><footer class="pt-5 pb-10 grid gap-3 sm:grid-cols-2">
    <div class="text-xs font-semibold text-gray-500 order-2 sm:order-1">
  © 2018-2025 —
  <a href="http://localhost:1313/">Nick Fisher&#39;s tech blog</a> 
</div>

    <div class="order-1 sm:order-2">
  <ul class="flex sm:justify-end gap-5">
    
    
    <li>    
      <a href="https://www.linkedin.com/in/nick-fisher-software/" target="_blank" rel="noopener noreferrer">LinkedIn</a>
    </li>
    
    <li>    
      <a href="https://github.com/nfisher23" target="_blank" rel="noopener noreferrer">GitHub</a>
    </li>
    
    
  </ul>
</div>

</footer></body>
</html>
