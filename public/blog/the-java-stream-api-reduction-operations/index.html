<!DOCTYPE html>
<html lang="en-US" class="scroll-smooth dark">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>

<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>The Java Stream API: Reduction Operations</title>
<meta
  name="description"
  content="The sample code for this post can be found on GitHub.
Reduction operations are a way to consolidate collections into one simple result."
/>
<link rel="canonical" href="http://localhost:1313/blog/the-java-stream-api-reduction-operations/" />
<link rel="robots" href="/robots.txt" />

<link rel="icon" type="image/x-icon" href="/img/nficon.png" />



<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']] } });</script>

<link rel="stylesheet" href="http://localhost:1313/css/app.css" /></head>

  <body class="max-w-screen-md mx-auto px-2.5">
    <div class="header">
      <header class="flex flex-col sm:flex-row items-center gap-5 sm:gap-10 pt-16 py-12">
   


<div class="flex-none w-20 h-20 rounded-full overflow-hidden">
  <a href="http://localhost:1313/">
    <img
      srcset="/img/profile-picture_hu4241499301404582006.jpg 80w"
      src="/img/profile-picture.jpg"
      width="386"
      height="345"
      alt="Nick Fisher&#39;s tech blog"
    />
  </a>
</div>

  
  <div class="flex flex-col gap-5">
    <a href="http://localhost:1313/">
  <h1 id="site-title">Nick Fisher&#39;s tech blog</h1>
</a>
 
    <nav>
  <ul>
     
    
    <li>
      <a href="/" class="">
        home
      </a>
    </li>
    
    <li>
      <a href="/blog" class="">
        blog
      </a>
    </li>
    
    <li>
      <a href="/about" class="">
        about
      </a>
    </li>
    
    <li>
      <a href="/tags" class="">
        Tags
      </a>
    </li>
    
  </ul>
</nav>

  </div>
</header>

      <button class="toggle-theme" aria-label="Toggle Theme" title="Toggle Theme" onclick="toggleTheme()">
  <span class="theme-icon light"> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" />
</svg> </span>
  <span class="theme-icon dark"> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" d="M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z" />
</svg> </span>
</button>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const theme = localStorage.getItem('theme');

    if (!theme || theme === 'light') {
      setTheme('light');
    } else {
      setTheme(theme);
    }
  });

  function setTheme(theme) {
    const html = document.querySelector('html');
    localStorage.setItem('theme', theme);

    if (theme === 'light') {
      if (html.classList.contains('dark')) {
        document.querySelector('html').classList.remove('dark');
      }

      document.querySelector('.theme-icon.light').style.display = 'none';
      document.querySelector('.theme-icon.dark').style.display = 'block';
    } else {
      if (!html.classList.contains('dark')) {
        document.querySelector('html').classList.add('dark');
      }

      document.querySelector('.theme-icon.dark').style.display = 'none';
      document.querySelector('.theme-icon.light').style.display = 'block';
    }
  }

  function toggleTheme() {
    const theme = localStorage.getItem('theme');

    if (theme === 'light') {
      setTheme('dark');
    } else {
      setTheme('light');
    }
  }
</script>
    </div>
  
    <main id="content">

<article class="flex flex-col gap-10">
  <header class="flex flex-col gap-2">
    <h2 class="title-large">The Java Stream API: Reduction Operations</h2>

    <div class="meta">
      
      <time datetime="2018-10-21 19:38:40 &#43;0000 UTC" title='Sun, Oct 21, 2018, 7:38 PM UTC'>
        21/10/2018 - Estimated reading time: 2 minutes
      </time>

       
      
    </div>
  </header>

  

  <section><p>The sample code for this post can be found <a href="https://github.com/nfisher23/java_stream_api_samples">on GitHub</a>.</p>
<p>Reduction operations are a way to consolidate collections into one simple result.</p>
<p>Given our SimplePair object:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">class</span> <span style="color:#50fa7b">SimplePair</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">private</span> String name;
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">private</span> <span style="color:#8be9fd">int</span> id;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">public</span> String <span style="color:#50fa7b">getName</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">return</span> name;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">setName</span>(String name) {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">this</span>.<span style="color:#50fa7b">name</span> <span style="color:#ff79c6">=</span> name;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">int</span> <span style="color:#50fa7b">getId</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">return</span> id;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">setId</span>(<span style="color:#8be9fd">int</span> id) {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">this</span>.<span style="color:#50fa7b">id</span> <span style="color:#ff79c6">=</span> id;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">public</span> String <span style="color:#50fa7b">toString</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">return</span> <span style="color:#f1fa8c">&#34;name-&#34;</span> <span style="color:#ff79c6">+</span> name <span style="color:#ff79c6">+</span> <span style="color:#f1fa8c">&#34;,id-&#34;</span> <span style="color:#ff79c6">+</span> id;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>And a collection like:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">static</span> List<span style="color:#ff79c6">&lt;</span>SimplePair<span style="color:#ff79c6">&gt;</span> <span style="color:#50fa7b">generateSimplePairs</span>(<span style="color:#8be9fd">int</span> numToGenerate) {
</span></span><span style="display:flex;"><span>    List<span style="color:#ff79c6">&lt;</span>SimplePair<span style="color:#ff79c6">&gt;</span> pairs <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> ArrayList<span style="color:#ff79c6">&lt;&gt;</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">for</span> (<span style="color:#8be9fd">int</span> i <span style="color:#ff79c6">=</span> 1; i <span style="color:#ff79c6">&lt;=</span> numToGenerate; i<span style="color:#ff79c6">++</span>) {
</span></span><span style="display:flex;"><span>        SimplePair pair <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> SimplePair();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        pair.<span style="color:#50fa7b">setId</span>(i);
</span></span><span style="display:flex;"><span>        pair.<span style="color:#50fa7b">setName</span>(<span style="color:#f1fa8c">&#34;pair&#34;</span> <span style="color:#ff79c6">+</span> i);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        pairs.<span style="color:#50fa7b">add</span>(pair);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">return</span> pairs;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Often, we would want to use this to sum up or multiply members in a particular way. Here, we will
sum all of the ids of our simple pairs (the id&rsquo;s in this collection are 1, 2, 3, 4, and 5):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">reduce_sumAllIds</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#6272a4">// sums like x_0 + x_1 + ... + x_n:</span>
</span></span><span style="display:flex;"><span>    Optional<span style="color:#ff79c6">&lt;</span>Integer<span style="color:#ff79c6">&gt;</span> idsSummed <span style="color:#ff79c6">=</span> pairs.<span style="color:#50fa7b">stream</span>()
</span></span><span style="display:flex;"><span>            .<span style="color:#50fa7b">map</span>(SimplePair::getId)
</span></span><span style="display:flex;"><span>            .<span style="color:#50fa7b">reduce</span>((firstId, secondId) <span style="color:#ff79c6">-&gt;</span> firstId <span style="color:#ff79c6">+</span> secondId);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    assertEquals(15, idsSummed.<span style="color:#50fa7b">orElseThrow</span>(RuntimeException::<span style="color:#ff79c6">new</span>).<span style="color:#50fa7b">intValue</span>());
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>This above version of the reduce(..) method takes a BinaryOperator<!-- raw HTML omitted --> object, which gets applied in sequence. In the
above example, the result is a predictable addition of 1 + 2 + 3 + 4 + 5. It takes the resulting sum that has been accumulated
so far and adds it to the next Integer in the sequence. If we wanted to multiply all of the ids together, we can do
so by changing the addition operator to a multiplication operator, like so:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">reduce_multiplyAllIds</span>() {
</span></span><span style="display:flex;"><span>    Optional<span style="color:#ff79c6">&lt;</span>Integer<span style="color:#ff79c6">&gt;</span> idsMultiplied <span style="color:#ff79c6">=</span> pairs.<span style="color:#50fa7b">stream</span>()
</span></span><span style="display:flex;"><span>            .<span style="color:#50fa7b">map</span>(SimplePair::getId)
</span></span><span style="display:flex;"><span>            .<span style="color:#50fa7b">reduce</span>((firstId, secondId) <span style="color:#ff79c6">-&gt;</span> firstId <span style="color:#ff79c6">*</span> secondId);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    assertEquals(1 <span style="color:#ff79c6">*</span> 2 <span style="color:#ff79c6">*</span> 3 <span style="color:#ff79c6">*</span> 4 <span style="color:#ff79c6">*</span> 5, idsMultiplied.<span style="color:#50fa7b">orElseThrow</span>(RuntimeException::<span style="color:#ff79c6">new</span>).<span style="color:#50fa7b">intValue</span>());
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Finally, we can seed an initial value in the reduce(..) method. Typically, this would be an identity operator, like zero for addition and one
for multiplication, which allows you to drop the Optional<!-- raw HTML omitted --> wrapper and just get a value, where the value returned would just be the seed value
if there is no data in the Stream. Here, we will add up all the ids, starting with the number 10:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">reduce_usingIdentityValue</span>() {
</span></span><span style="display:flex;"><span>    Integer idsSummedWithIdentity <span style="color:#ff79c6">=</span> pairs.<span style="color:#50fa7b">stream</span>()
</span></span><span style="display:flex;"><span>            .<span style="color:#50fa7b">map</span>(SimplePair::getId)
</span></span><span style="display:flex;"><span>            .<span style="color:#50fa7b">reduce</span>(10, (firstId, secondId) <span style="color:#ff79c6">-&gt;</span> firstId <span style="color:#ff79c6">+</span> secondId);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    assertEquals(25, idsSummedWithIdentity.<span style="color:#50fa7b">intValue</span>());
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></section>

  
    
  

    
  


  <footer>
    
      <div class="pb-14 taxonomy-list tags-list">
      
        <a href="/tags/java/" alt="Java">
          Java
        </a>
      
        <a href="/tags/java-stream-api/" alt="Java Stream Api">
          Java Stream Api
        </a>
      
      </div>
    
  </footer>
</article>


    </main><footer class="pt-5 pb-10 grid gap-3 sm:grid-cols-2">
    <div class="text-xs font-semibold text-gray-500 order-2 sm:order-1">
  © 2018-2025 —
  <a href="http://localhost:1313/">Nick Fisher&#39;s tech blog</a> 
</div>

    <div class="order-1 sm:order-2">
  <ul class="flex sm:justify-end gap-5">
    
    
    <li>    
      <a href="https://www.linkedin.com/in/nick-fisher-software/" target="_blank" rel="noopener noreferrer">LinkedIn</a>
    </li>
    
    <li>    
      <a href="https://github.com/nfisher23" target="_blank" rel="noopener noreferrer">GitHub</a>
    </li>
    
    
  </ul>
</div>

</footer></body>
</html>
