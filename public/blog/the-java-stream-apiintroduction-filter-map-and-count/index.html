<!DOCTYPE html>
<html lang="en-US" class="scroll-smooth dark">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>

<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>The Java Stream API--Introduction: Filter, Map, and Count</title>
<meta
  name="description"
  content="The sample code provided with this series on the Java Stream API can be retrieved on GitHub."
/>
<link rel="canonical" href="http://localhost:1313/blog/the-java-stream-apiintroduction-filter-map-and-count/" />
<link rel="robots" href="/robots.txt" />

<link rel="icon" type="image/x-icon" href="/icons/favicon.ico" />



<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']] } });</script>

<link rel="stylesheet" href="http://localhost:1313/css/app.css" /></head>

  <body class="max-w-screen-md mx-auto px-2.5">
    <div class="header">
      <header class="flex flex-col sm:flex-row items-center gap-5 sm:gap-10 pt-16 py-12">
   


<div class="flex-none w-20 h-20 rounded-full overflow-hidden">
  <a href="http://localhost:1313/">
    <img
      srcset="/img/profile-picture_hu4241499301404582006.jpg 80w"
      src="/img/profile-picture.jpg"
      width="386"
      height="345"
      alt="Nick Fisher&#39;s tech blog"
    />
  </a>
</div>

  
  <div class="flex flex-col gap-5">
    <a href="http://localhost:1313/">
  <h1 id="site-title">Nick Fisher&#39;s tech blog</h1>
</a>
 
    <nav>
  <ul>
     
    
    <li>
      <a href="/" class="">
        Home
      </a>
    </li>
    
    <li>
      <a href="/blog" class="">
        Blog
      </a>
    </li>
    
    <li>
      <a href="/about" class="">
        About me
      </a>
    </li>
    
    <li>
      <a href="/categories" class="">
        Categories
      </a>
    </li>
    
    <li>
      <a href="/tags" class="">
        Tags
      </a>
    </li>
    
  </ul>
</nav>

  </div>
</header>

      <button class="toggle-theme" aria-label="Toggle Theme" title="Toggle Theme" onclick="toggleTheme()">
  <span class="theme-icon light"> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" />
</svg> </span>
  <span class="theme-icon dark"> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" d="M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z" />
</svg> </span>
</button>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const theme = localStorage.getItem('theme');

    if (!theme || theme === 'light') {
      setTheme('light');
    } else {
      setTheme(theme);
    }
  });

  function setTheme(theme) {
    const html = document.querySelector('html');
    localStorage.setItem('theme', theme);

    if (theme === 'light') {
      if (html.classList.contains('dark')) {
        document.querySelector('html').classList.remove('dark');
      }

      document.querySelector('.theme-icon.light').style.display = 'none';
      document.querySelector('.theme-icon.dark').style.display = 'block';
    } else {
      if (!html.classList.contains('dark')) {
        document.querySelector('html').classList.add('dark');
      }

      document.querySelector('.theme-icon.dark').style.display = 'none';
      document.querySelector('.theme-icon.light').style.display = 'block';
    }
  }

  function toggleTheme() {
    const theme = localStorage.getItem('theme');

    if (theme === 'light') {
      setTheme('dark');
    } else {
      setTheme('light');
    }
  }
</script>
    </div>
  
    <main id="content">

<article class="flex flex-col gap-10">
  <header class="flex flex-col gap-2">
    <h2 class="title-large">The Java Stream API--Introduction: Filter, Map, and Count</h2>

    <div class="meta">
      
      <time datetime="2018-10-20 12:00:18 &#43;0000 UTC" title='Sat, Oct 20, 2018, 12:00 PM UTC'>
        20/10/2018 - Estimated reading time: 3 minutes
      </time>

       
      
    </div>
  </header>

  

  <section><p>The sample code provided with this series on the Java Stream API can be retrieved <a href="https://github.com/nfisher23/java_stream_api_samples/tree/master">on GitHub</a>.</p>
<p>The Java Stream API, introduced in Java 8, provides a remarkably simple, yet powerful, interface for manipulating data. In essence, it marries
some of the object oriented features baked into Java with many of the strengths of functional programming. All of that is included with efficient streaming of data&ndash;that is,
it is only acted upon when the stream completes.</p>
<p>We'll get started by manipulating a simple collection of names. You can create a stream from a collection by calling <code>stream()</code> on a Collection.
This creates a <em>new</em> stream of data from the collection, which does not affect or change the original collection from which the stream is derived.
If we have a collection of names as Strings like so:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">static</span> List<span style="color:#ff79c6">&amp;</span>lt;String<span style="color:#ff79c6">&amp;</span>gt; getListOfNames() {
</span></span><span style="display:flex;"><span>    List<span style="color:#ff79c6">&amp;</span>lt;String<span style="color:#ff79c6">&amp;</span>gt; names <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> ArrayList<span style="color:#ff79c6">&amp;</span>lt;<span style="color:#ff79c6">&amp;</span>gt;();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    names.<span style="color:#50fa7b">add</span>(<span style="color:#ff79c6">&amp;</span>#34;John<span style="color:#ff79c6">&amp;</span>#34;);
</span></span><span style="display:flex;"><span>    names.<span style="color:#50fa7b">add</span>(<span style="color:#ff79c6">&amp;</span>#34;Jacob<span style="color:#ff79c6">&amp;</span>#34;);
</span></span><span style="display:flex;"><span>    names.<span style="color:#50fa7b">add</span>(<span style="color:#ff79c6">&amp;</span>#34;Jerry<span style="color:#ff79c6">&amp;</span>#34;);
</span></span><span style="display:flex;"><span>    names.<span style="color:#50fa7b">add</span>(<span style="color:#ff79c6">&amp;</span>#34;Josephine<span style="color:#ff79c6">&amp;</span>#34;);
</span></span><span style="display:flex;"><span>    names.<span style="color:#50fa7b">add</span>(<span style="color:#ff79c6">&amp;</span>#34;Janine<span style="color:#ff79c6">&amp;</span>#34;);
</span></span><span style="display:flex;"><span>    names.<span style="color:#50fa7b">add</span>(<span style="color:#ff79c6">&amp;</span>#34;Alan<span style="color:#ff79c6">&amp;</span>#34;);
</span></span><span style="display:flex;"><span>    names.<span style="color:#50fa7b">add</span>(<span style="color:#ff79c6">&amp;</span>#34;Beverly<span style="color:#ff79c6">&amp;</span>#34;);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">return</span> names;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Then we can see that the original list is not affected by any operations:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">originalListUnchanged</span>() {
</span></span><span style="display:flex;"><span>    List<span style="color:#ff79c6">&amp;</span>lt;String<span style="color:#ff79c6">&amp;</span>gt; emptyList <span style="color:#ff79c6">=</span> names.<span style="color:#50fa7b">stream</span>().<span style="color:#50fa7b">filter</span>(name <span style="color:#ff79c6">-&amp;</span>gt; <span style="color:#ff79c6">false</span>).<span style="color:#50fa7b">collect</span>(Collectors.<span style="color:#50fa7b">toList</span>());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    assertTrue(emptyList.<span style="color:#50fa7b">isEmpty</span>());
</span></span><span style="display:flex;"><span>    assertFalse(names.<span style="color:#50fa7b">isEmpty</span>());
</span></span><span style="display:flex;"><span>    assertEquals(<span style="color:#ff79c6">&amp;</span>#34;John<span style="color:#ff79c6">&amp;</span>#34;, names.<span style="color:#50fa7b">get</span>(0));
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>We can make a collection smaller by calling the filter(..) method, shown initially above, which takes a Predicate&lt;T&gt;.
Anything evaluating to true will be kept in the collection, and anything evaluating to false will be removed. Above, any returned collection
which uses this predicate will return as empty, since our filtering method always returns false.</p>
<p>We can get all the names beginning with &quot;J&quot; with <code>.filter(name -&amp;gt; name.startsWith(&amp;#34;J&amp;#34;))</code>, and we can collect it into a List that we can work with by calling <code>collect(Collectors.ToList())</code>.
The <code>collect(..)</code> method is a <em>terminal operation</em>, which means that we are done with the stream once we call it, and we can't do anything else with that stream from that point on:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">filterByFirstLetter</span>() {
</span></span><span style="display:flex;"><span>    Stream<span style="color:#ff79c6">&amp;</span>lt;String<span style="color:#ff79c6">&amp;</span>gt; streamFilteredByFirstLetter <span style="color:#ff79c6">=</span> names.<span style="color:#50fa7b">stream</span>()
</span></span><span style="display:flex;"><span>            .<span style="color:#50fa7b">filter</span>(name <span style="color:#ff79c6">-&amp;</span>gt; name.<span style="color:#50fa7b">startsWith</span>(<span style="color:#ff79c6">&amp;</span>#34;J<span style="color:#ff79c6">&amp;</span>#34;));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    List<span style="color:#ff79c6">&amp;</span>lt;String<span style="color:#ff79c6">&amp;</span>gt; listFilteredByFirstLetter <span style="color:#ff79c6">=</span> streamFilteredByFirstLetter.<span style="color:#50fa7b">collect</span>(Collectors.<span style="color:#50fa7b">toList</span>());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    assertEquals(5, listFilteredByFirstLetter.<span style="color:#50fa7b">size</span>());
</span></span><span style="display:flex;"><span>    assertEquals(<span style="color:#ff79c6">&amp;</span>#34;John<span style="color:#ff79c6">&amp;</span>#34;, listFilteredByFirstLetter.<span style="color:#50fa7b">get</span>(0));
</span></span><span style="display:flex;"><span>    assertEquals(<span style="color:#ff79c6">&amp;</span>#34;Janine<span style="color:#ff79c6">&amp;</span>#34;, listFilteredByFirstLetter.<span style="color:#50fa7b">get</span>(4));
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>We can get all names starting with &quot;Jo&quot; in the same way:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">filterByFirstTwoLetters</span>() {
</span></span><span style="display:flex;"><span>    Stream<span style="color:#ff79c6">&amp;</span>lt;String<span style="color:#ff79c6">&amp;</span>gt; streamFilteredByFirstTwoLetters <span style="color:#ff79c6">=</span> names.<span style="color:#50fa7b">stream</span>()
</span></span><span style="display:flex;"><span>            .<span style="color:#50fa7b">filter</span>(name <span style="color:#ff79c6">-&amp;</span>gt; name.<span style="color:#50fa7b">startsWith</span>(<span style="color:#ff79c6">&amp;</span>#34;Jo<span style="color:#ff79c6">&amp;</span>#34;));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    List<span style="color:#ff79c6">&amp;</span>lt;String<span style="color:#ff79c6">&amp;</span>gt; listFiltered <span style="color:#ff79c6">=</span> streamFilteredByFirstTwoLetters.<span style="color:#50fa7b">collect</span>(Collectors.<span style="color:#50fa7b">toList</span>());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    assertEquals(2, listFiltered.<span style="color:#50fa7b">size</span>());
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Another simple terminal operation is <code>count()</code>, which, as you can probably guess, counts the number of elements in the stream:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">countFilteredValues</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd">long</span> countFilteredByFirstLetter <span style="color:#ff79c6">=</span> names.<span style="color:#50fa7b">stream</span>().<span style="color:#50fa7b">filter</span>(name <span style="color:#ff79c6">-&amp;</span>gt; name.<span style="color:#50fa7b">startsWith</span>(<span style="color:#ff79c6">&amp;</span>#34;J<span style="color:#ff79c6">&amp;</span>#34;)).<span style="color:#50fa7b">count</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    assertEquals(5, countFilteredByFirstLetter);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>For large collections, we can even do it in parallel:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">parallelCount</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd">long</span> parallelCount <span style="color:#ff79c6">=</span> names.<span style="color:#50fa7b">parallelStream</span>().<span style="color:#50fa7b">filter</span>(name <span style="color:#ff79c6">-&amp;</span>gt; name.<span style="color:#50fa7b">startsWith</span>(<span style="color:#ff79c6">&amp;</span>#34;J<span style="color:#ff79c6">&amp;</span>#34;)).<span style="color:#50fa7b">count</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    assertEquals(5, parallelCount);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>When it comes to parallel streams, a good rule of thumb is to make sure that whatever you're doing doesn't manipulate a shared state. I will cover parallel streams in detail in a <a href="https://nickolasfisher.com/blog/The-Java-Stream-API-Parallel-Streams">different post</a>.</p>
<p>Finally, a often used method on streams is the <code>map(..)</code> method. <code>map(..)</code> allows you to take an object and manipulate it for downstream usage. Here, we will add the string &quot; Smith&quot; to every name, so our collection
will look like &quot;John Smith&quot;, &quot;Jacob Smith&quot;, &quot;Jerry Smith&quot;, etc:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">addLastName</span>() {
</span></span><span style="display:flex;"><span>    List<span style="color:#ff79c6">&amp;</span>lt;String<span style="color:#ff79c6">&amp;</span>gt; theSmiths <span style="color:#ff79c6">=</span> names.<span style="color:#50fa7b">stream</span>().<span style="color:#50fa7b">map</span>(name <span style="color:#ff79c6">-&amp;</span>gt; name <span style="color:#ff79c6">&amp;</span>#43; <span style="color:#ff79c6">&amp;</span>#34; Smith<span style="color:#ff79c6">&amp;</span>#34;).<span style="color:#50fa7b">collect</span>(Collectors.<span style="color:#50fa7b">toList</span>());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    assertEquals(<span style="color:#ff79c6">&amp;</span>#34;John Smith<span style="color:#ff79c6">&amp;</span>#34;, theSmiths.<span style="color:#50fa7b">get</span>(0));
</span></span><span style="display:flex;"><span>    assertEquals(<span style="color:#ff79c6">&amp;</span>#34;Jacob Smith<span style="color:#ff79c6">&amp;</span>#34;, theSmiths.<span style="color:#50fa7b">get</span>(1));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">for</span> (String nameWithSmithAsLastName : theSmiths) {
</span></span><span style="display:flex;"><span>        String lastName <span style="color:#ff79c6">=</span> nameWithSmithAsLastName.<span style="color:#50fa7b">split</span>(<span style="color:#ff79c6">&amp;</span>#34; <span style="color:#ff79c6">&amp;</span>#34;)<span style="color:#ff79c6">[</span>1<span style="color:#ff79c6">]</span>;
</span></span><span style="display:flex;"><span>        assertEquals(<span style="color:#ff79c6">&amp;</span>#34;Smith<span style="color:#ff79c6">&amp;</span>#34;, lastName);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Or we could take the first letter from each name like so:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">getFirstLetter</span>() {
</span></span><span style="display:flex;"><span>    List<span style="color:#ff79c6">&amp;</span>lt;String<span style="color:#ff79c6">&amp;</span>gt; firstLetters <span style="color:#ff79c6">=</span> names.<span style="color:#50fa7b">stream</span>().<span style="color:#50fa7b">map</span>(name <span style="color:#ff79c6">-&amp;</span>gt; name.<span style="color:#50fa7b">substring</span>(0, 1)).<span style="color:#50fa7b">collect</span>(Collectors.<span style="color:#50fa7b">toList</span>());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    assertEquals(<span style="color:#ff79c6">&amp;</span>#34;J<span style="color:#ff79c6">&amp;</span>#34;,firstLetters.<span style="color:#50fa7b">get</span>(0));
</span></span><span style="display:flex;"><span>    assertEquals(<span style="color:#ff79c6">&amp;</span>#34;J<span style="color:#ff79c6">&amp;</span>#34;,firstLetters.<span style="color:#50fa7b">get</span>(1));
</span></span><span style="display:flex;"><span>    assertEquals(<span style="color:#ff79c6">&amp;</span>#34;J<span style="color:#ff79c6">&amp;</span>#34;,firstLetters.<span style="color:#50fa7b">get</span>(2));
</span></span><span style="display:flex;"><span>    assertEquals(<span style="color:#ff79c6">&amp;</span>#34;A<span style="color:#ff79c6">&amp;</span>#34;,firstLetters.<span style="color:#50fa7b">get</span>(5));
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></section>

  
    
  

    
  


  <footer>
    
  </footer>
</article>


    </main><footer class="pt-5 pb-10 grid gap-3 sm:grid-cols-2">
    <div class="text-xs font-semibold text-gray-500 order-2 sm:order-1">
  © 2018-2025 —
  <a href="http://localhost:1313/">Nick Fisher&#39;s tech blog</a> 
</div>

    <div class="order-1 sm:order-2">
  <ul class="flex sm:justify-end gap-5">
    
    
    <li>    
      <a href="https://www.linkedin.com/in/nick-fisher-software/" target="_blank" rel="noopener noreferrer">LinkedIn</a>
    </li>
    
    <li>    
      <a href="https://github.com/nfisher23" target="_blank" rel="noopener noreferrer">GitHub</a>
    </li>
    
    
  </ul>
</div>

</footer></body>
</html>
