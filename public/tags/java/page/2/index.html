<!DOCTYPE html>
<html lang="en-US" class="scroll-smooth dark">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>

<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Java</title>
<meta
  name="description"
  content=""
/>
<link rel="canonical" href="http://localhost:1313/tags/java/" />
<link rel="robots" href="/robots.txt" />

<link rel="icon" type="image/x-icon" href="/img/nficon.png" />



<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']] } });</script>

<link rel="stylesheet" href="http://localhost:1313/css/app.css" /></head>

  <body class="max-w-screen-md mx-auto px-2.5">
    <div class="header">
      <header class="flex flex-col sm:flex-row items-center gap-5 sm:gap-10 pt-16 py-12">
   


<div class="flex-none w-20 h-20 rounded-full overflow-hidden">
  <a href="http://localhost:1313/">
    <img
      srcset="/img/profile-picture_hu4241499301404582006.jpg 80w"
      src="/img/profile-picture.jpg"
      width="386"
      height="345"
      alt="Nick Fisher&#39;s tech blog"
    />
  </a>
</div>

  
  <div class="flex flex-col gap-5">
    <a href="http://localhost:1313/">
  <h1 id="site-title">Nick Fisher&#39;s tech blog</h1>
</a>
 
    <nav>
  <ul>
     
    
    <li>
      <a href="/" class="">
        home
      </a>
    </li>
    
    <li>
      <a href="/blog" class="">
        blog
      </a>
    </li>
    
    <li>
      <a href="/about" class="">
        about
      </a>
    </li>
    
    <li>
      <a href="/tags" class="">
        Tags
      </a>
    </li>
    
  </ul>
</nav>

  </div>
</header>

      <button class="toggle-theme" aria-label="Toggle Theme" title="Toggle Theme" onclick="toggleTheme()">
  <span class="theme-icon light"> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" />
</svg> </span>
  <span class="theme-icon dark"> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" d="M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z" />
</svg> </span>
</button>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const theme = localStorage.getItem('theme');

    if (!theme || theme === 'light') {
      setTheme('light');
    } else {
      setTheme(theme);
    }
  });

  function setTheme(theme) {
    const html = document.querySelector('html');
    localStorage.setItem('theme', theme);

    if (theme === 'light') {
      if (html.classList.contains('dark')) {
        document.querySelector('html').classList.remove('dark');
      }

      document.querySelector('.theme-icon.light').style.display = 'none';
      document.querySelector('.theme-icon.dark').style.display = 'block';
    } else {
      if (!html.classList.contains('dark')) {
        document.querySelector('html').classList.add('dark');
      }

      document.querySelector('.theme-icon.dark').style.display = 'none';
      document.querySelector('.theme-icon.light').style.display = 'block';
    }
  }

  function toggleTheme() {
    const theme = localStorage.getItem('theme');

    if (theme === 'light') {
      setTheme('dark');
    } else {
      setTheme('light');
    }
  }
</script>
    </div>
  
    <main id="content">




<div class="flex flex-col gap-1">
  <h1 class="text-2xl font-extrabold">
    
      Java
      
    </h1>
  
  
</div>

<section class="flex flex-col gap-10">
  
    <article class="flex flex-col gap-1">
  <h1>
    <a href="http://localhost:1313/blog/using-redis-as-a-distributed-lock-with-lettuce/">Using Redis as a Distributed Lock with Lettuce</a>
  </h1>
  
  <span class="date">
    <time datetime="2021-05-01 14:44:31 &#43;0000 UTC" title='Sat, May 1, 2021, 2:44 PM UTC'>
      01/05/2021
    </time>
  </span>

  <div class="description">
    
      <p>The source code for this article <a href="https://github.com/nfisher23/reactive-programming-webflux">can be found on Github</a>.</p>
<p>Using Redis as a best effort locking mechanism can be very useful in practice, to prevent two logical threads from clobbering each other. While redis locking is certainly not perfect, and <a href="https://martin.kleppmann.com/2016/02/08/how-to-do-distributed-locking.html">you shouldn't use redis locking if the underlying operation can't be occasionally done twice</a>, it can still be useful for that &quot;best effort, do this once&quot; use case.</p>
    
  </div>

  <div class="mt-2">
    <a class="read-more" href="http://localhost:1313/blog/using-redis-as-a-distributed-lock-with-lettuce/">
      Read more
      <span class="w-4 h-4 stroke-2">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
  <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3" />
</svg>

      </span>
    </a>
  </div>
</article>

  
    <article class="flex flex-col gap-1">
  <h1>
    <a href="http://localhost:1313/blog/subscribing-to-channels-in-clustered-redis-with-lettuce/">Subscribing to Channels in Clustered Redis With Lettuce</a>
  </h1>
  
  <span class="date">
    <time datetime="2021-04-25 18:43:42 &#43;0000 UTC" title='Sun, Apr 25, 2021, 6:43 PM UTC'>
      25/04/2021
    </time>
  </span>

  <div class="description">
    
      <p>We already know <a href="https://nickolasfisher.com/blog/Subscribing-to-Redis-Channels-with-Java-Spring-Boot-and-Lettuce">how to subscribe to redis using lettuce</a> when it's not running in clustered mode. If it's running in clustered mode, it's not terribly different, but I did discover one thing that is interesting, which is the subject of this article.</p>
    
  </div>

  <div class="mt-2">
    <a class="read-more" href="http://localhost:1313/blog/subscribing-to-channels-in-clustered-redis-with-lettuce/">
      Read more
      <span class="w-4 h-4 stroke-2">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
  <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3" />
</svg>

      </span>
    </a>
  </div>
</article>

  
    <article class="flex flex-col gap-1">
  <h1>
    <a href="http://localhost:1313/blog/pre-loading-lua-scripts-into-clustered-redis-with-lettuce/">Pre Loading Lua Scripts into Clustered Redis with Lettuce</a>
  </h1>
  
  <span class="date">
    <time datetime="2021-04-25 17:37:07 &#43;0000 UTC" title='Sun, Apr 25, 2021, 5:37 PM UTC'>
      25/04/2021
    </time>
  </span>

  <div class="description">
    
      <p>The source code for what follows <a href="https://github.com/nfisher23/reactive-programming-webflux">can be found on github</a>.</p>
<p>In a previous article, we showed how to <a href="https://nickolasfisher.com/blog/Pre-Loading-a-Lua-Script-into-Redis-With-Lettuce">efficiently execute a lua script in redis using lettuce</a>. To really scale our caching solution horizontally [and elegantly deal with many scaling headaches], we will also want to make sure we can execute our lua scripts against clustered redis, which as we'll see here is pretty straightforward.</p>
    
  </div>

  <div class="mt-2">
    <a class="read-more" href="http://localhost:1313/blog/pre-loading-lua-scripts-into-clustered-redis-with-lettuce/">
      Read more
      <span class="w-4 h-4 stroke-2">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
  <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3" />
</svg>

      </span>
    </a>
  </div>
</article>

  
    <article class="flex flex-col gap-1">
  <h1>
    <a href="http://localhost:1313/blog/optimistic-locking-in-redis-with-reactive-lettuce/">Optimistic Locking in Redis with Reactive Lettuce</a>
  </h1>
  
  <span class="date">
    <time datetime="2021-04-24 21:32:36 &#43;0000 UTC" title='Sat, Apr 24, 2021, 9:32 PM UTC'>
      24/04/2021
    </time>
  </span>

  <div class="description">
    
      <p>The source code for what follows <a href="https://github.com/nfisher23/reactive-programming-webflux">can be found on Github</a>.</p>
<p>Optimistic Locking in Redis is one of the only reasons to want to use transactions, in my opinion. You can ensure a grouping of atomic operations only occur if a watched key does not change out from underneath you. On the CLI, this might start with:</p>
    
  </div>

  <div class="mt-2">
    <a class="read-more" href="http://localhost:1313/blog/optimistic-locking-in-redis-with-reactive-lettuce/">
      Read more
      <span class="w-4 h-4 stroke-2">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
  <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3" />
</svg>

      </span>
    </a>
  </div>
</article>

  
    <article class="flex flex-col gap-1">
  <h1>
    <a href="http://localhost:1313/blog/redis-transactions-reactive-lettuce-buyer-beware/">Redis Transactions, Reactive Lettuce: Buyer Beware</a>
  </h1>
  
  <span class="date">
    <time datetime="2021-04-24 20:48:04 &#43;0000 UTC" title='Sat, Apr 24, 2021, 8:48 PM UTC'>
      24/04/2021
    </time>
  </span>

  <div class="description">
    
      <p>The source code for what follows <a href="https://github.com/nfisher23/reactive-programming-webflux">can be found on Github</a>.</p>
<p>Redis Transactions do not operate exactly the way you would expect if you're coming from a relational database management system like MySQL or postrgres. It's mostly useful for optimistic locking, but honestly there are better ways to accomplish many of the things you're probably trying to, like <a href="https://nickolasfisher.com/blog/How-to-Run-a-Lua-Script-against-Redis-using-Lettuce">running a lua script with arguments</a> [which is guaranteed to be atomic]. The <a href="https://redis.io/topics/transactions">documentation on transactions in redis</a> describes some of the caveats, the biggest one probably being that it does not support rollbacks, only commits or discards.</p>
    
  </div>

  <div class="mt-2">
    <a class="read-more" href="http://localhost:1313/blog/redis-transactions-reactive-lettuce-buyer-beware/">
      Read more
      <span class="w-4 h-4 stroke-2">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
  <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3" />
</svg>

      </span>
    </a>
  </div>
</article>

  
</section>


  

<div class="pb-10 grid grid-cols-2 font-semibold">
  
  <div>
    
      <a href="/tags/java/" class="pagination-button">
        <span class="h-4 w-4 stroke-2"> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
  <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18" />
</svg>
 </span>
        Newer Posts
      </a>
    
  </div>

  
  <div class="flex justify-end">
    
      <a href="/tags/java/page/3/" class="pagination-button">
        Older Posts
        <span class="h-4 w-4 stroke-2"> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
  <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3" />
</svg>
 </span>
      </a>
    
  </div>
</div>




    </main><footer class="pt-5 pb-10 grid gap-3 sm:grid-cols-2">
    <div class="text-xs font-semibold text-gray-500 order-2 sm:order-1">
  © 2018-2025 —
  <a href="http://localhost:1313/">Nick Fisher&#39;s tech blog</a> 
</div>

    <div class="order-1 sm:order-2">
  <ul class="flex sm:justify-end gap-5">
    
    
    <li>    
      <a href="https://www.linkedin.com/in/nick-fisher-software/" target="_blank" rel="noopener noreferrer">LinkedIn</a>
    </li>
    
    <li>    
      <a href="https://github.com/nfisher23" target="_blank" rel="noopener noreferrer">GitHub</a>
    </li>
    
    
  </ul>
</div>

</footer></body>
</html>
